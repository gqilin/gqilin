(self["webpackChunkvue3_test"]=self["webpackChunkvue3_test"]||[]).push([[6999],{38899:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Pe}});var i=function(){var e=this,t=e._self._c;return t("div",{class:"epub_box "+e.backclass},[t("div",{staticClass:"epub_box_c",staticStyle:{"margin-top":"15px"}},[t("div",{staticClass:"read_left_box"},[t("div",{staticClass:"read_left"},[t("div",{staticClass:"title theme-title"},[e._v("商品详情")]),e.coverFiles[0]?t("div",{staticClass:"read_leftt1"},[t("el-image",{staticClass:"read_leftt1_img",attrs:{src:e.coverFiles[0].fullUrl,fit:"contain"}}),t("p",{staticClass:"ellipsis-aRow"},[t("span",[e._v(e._s(e.callDictionaries(e.goodsTypeList,e.bookdetail.resourceType)))]),e._v(" "+e._s(e.bookdetail.goodsTitle)+" ")])],1):e._e(),t("div",{staticClass:"read_leftt2"},["looseleafOrtextbook"!=e.bookdetail.goodsType?t("li",{staticClass:"author-text-box"},[e._v(" 作者："),t("span",{staticClass:"author-text"},[e._v(e._s(e.bookdetail.author||"-"))]),e.isTrial&&e.purchasePath&&e.bookdetail.goodsTitle?t("button",{staticClass:"purchase",on:{click:e.purchaseBut}},[e._v(" 立即购买 ")]):e._e()]):e._e(),"reference"!==e.bookdetail.goodsType&&"other"!==e.bookdetail.goodsType?t("li",[e._v(" ISBN: "+e._s(e.bookdetail.isbn||"-")+" ")]):e._e(),"looseleafOrtextbook"!=e.bookdetail.goodsType?t("li",[e._v(" 出版社："+e._s(e.bookdetail.publishingHouse||"-")+" ")]):e._e(),"reference"!==e.bookdetail.goodsType&&"other"!==e.bookdetail.goodsType&&"looseleafOrtextbook"!=e.bookdetail.goodsType?t("li",[e._v(" 出版时间："+e._s(e.bookdetail.publishDate||"-")+" ")]):e._e(),t("li",[e._v("教学属性："+e._s(e.bookdetail.teachPropertyAllStr||"-"))]),t("li",[e._v("提供机构："+e._s(e.bookdetail.instName||"-"))])]),t("div",{staticClass:"read_leftt3"},[t("p",{staticClass:"ellipsis-twoRow"},[e._v(" "+e._s(e.bookdetail.authorRecommendation)+" ")])])]),t("div",{staticClass:"read_left2"},[t("div",{staticClass:"title theme-title color_F6A200"},[e._v("资源文件")]),t("div",{staticClass:"read_left2_ul"},e._l(e.sourceList,(function(s,i){return t("li",{key:i,class:i==e.readdefault?"active":"",on:{click:function(t){return e.getReadFileLink(i)}}},[t("p",{staticClass:"ellipsis-aRow"},[e._v(" "+e._s(s.sourceName)+"."+e._s(s.fileType)+" ")])])})),0)])]),t("div",{staticClass:"componentsview"},["epub"===e.readtype?t("epubread",{ref:"epubread",on:{readSchedule:e.readSchedule}}):e._e(),"pdf"===e.readtype?t("pdfread",{ref:"pdfread"}):e._e(),"pwe"===e.readtype?t("pweread",{ref:"pweread"}):e._e(),"audioread"===e.readtype?t("audioread",{ref:"audioread",attrs:{select_index:e.cover_fullUrl}}):e._e(),"img"===e.readtype?t("imgread",{ref:"imgread"}):e._e(),"videoread"===e.readtype?t("videoread",{ref:"videoread"}):e._e(),"zipread"===e.readtype?t("zipread",{ref:"zipread"}):e._e(),"htmlread"===e.readtype?t("htmlread",{ref:"htmlread"}):e._e(),"leafletread"===e.readtype?t("leaflet",{ref:"leafletread"}):e._e()],1)])])},a=[],o=s(88495),r=s.n(o),l=s(97107),n=s(54526),d=s(85837),c=s(7742),h=s(66028),u=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"read_center_box",attrs:{id:"read_center_box"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:"auto"===e.flow,expression:"flow === 'auto'"}],staticClass:"show",attrs:{id:"divider"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.boxViewer,expression:"boxViewer"}],attrs:{id:"box"}},[t("div",{staticClass:"scrolled",attrs:{id:"viewer"}})])]),t("div",{staticClass:"read_right_box"},[t("div",{staticClass:"read_right_box1"},[t("el-popover",{attrs:{placement:"left",width:"500",trigger:"click"},model:{value:e.muluvisible,callback:function(t){e.muluvisible=t},expression:"muluvisible"}},[t("i",{staticClass:"el-icon-error",staticStyle:{float:"right","margin-top":"-5px","margin-bottom":"5px",cursor:"pointer"},on:{click:function(t){e.muluvisible=!1}}}),t("div",{staticClass:"mulu rmulu"},e._l(e.mulu,(function(s,i){return t("li",{key:i},[t("p",{staticClass:"ellipsis-aRow",on:{click:function(t){return e.clickmulu(s)}}},[e._v(" "+e._s(s.label)+" ")]),s.subitems.length?t("ul",{staticClass:"twomulu"},e._l(s.subitems,(function(s,i){return t("li",{key:i,on:{click:function(t){return e.clickmulu(s)}}},[e._v(" "+e._s(s.label)+" ")])})),0):e._e()])})),0),t("li",{attrs:{slot:"reference"},slot:"reference"},["zt_heise"!==e.backclass?t("img",{attrs:{src:s(85069)}}):e._e(),"zt_heise"===e.backclass?t("img",{attrs:{src:s(16825)}}):e._e(),t("p",[e._v("目录")])])]),t("el-popover",{attrs:{placement:"left",width:"350",trigger:"click"},model:{value:e.shezhivisible,callback:function(t){e.shezhivisible=t},expression:"shezhivisible"}},[t("i",{staticClass:"el-icon-error",staticStyle:{float:"right","margin-top":"-5px","margin-bottom":"5px",cursor:"pointer"},on:{click:function(t){e.shezhivisible=!1}}}),t("div",{staticClass:"shezhi"},[t("li",[t("p",[e._v("阅读主题")]),t("div",{staticClass:"xz_box ydzt"},e._l(e.backgroundList,(function(s,i){return t("span",{key:i,class:s.backclass===e.backclass?"active":"",style:"background: "+s.color,on:{click:function(t){e.changezt(s),e.result(),e.shezhisave()}}})})),0)]),t("li",[t("p",[e._v("正文字体")]),t("div",{staticClass:"xz_box zwzt"},e._l(e.zwztList,(function(s,i){return t("span",{key:i,class:e.zwzt===s.value?"active":"",on:{click:function(t){e.changezwzt(s.value),e.shezhisave()}}},[e._v(e._s(s.label))])})),0)]),t("li",[t("p",[e._v("字体大小")]),t("div",{staticClass:"xz_box ztdx"},[t("el-input-number",{attrs:{size:"small",min:12,max:36,label:"描述文字",step:2,"step-strictly":""},on:{change:function(t){return e.numchange()},blur:(t,s)=>{e.blurNumber(t,"num")}},model:{value:e.num,callback:function(t){e.num=t},expression:"num"}})],1)])]),t("li",{attrs:{slot:"reference"},slot:"reference"},["zt_heise"!==e.backclass?t("img",{attrs:{src:s(40103)}}):e._e(),"zt_heise"===e.backclass?t("img",{attrs:{src:s(89001)}}):e._e(),t("p",[e._v("设置")])])]),t("li",{on:{click:e.changeflow}},["zt_heise"!==e.backclass?t("div",["auto"===e.flow?t("img",{attrs:{src:s(14407)}}):e._e(),"auto"!==e.flow?t("img",{attrs:{src:s(30730)}}):e._e()]):e._e(),"zt_heise"===e.backclass?t("div",["auto"===e.flow?t("img",{attrs:{src:s(23270)}}):e._e(),"auto"!==e.flow?t("img",{attrs:{src:s(45342)}}):e._e()]):e._e(),t("p",[e._v(e._s("auto"===e.flow?"滑动阅读":"翻页阅读"))])])],1),t("div",{staticClass:"read_right_box2"},[t("div",{attrs:{id:"prev"}},[t("img",{attrs:{src:s(90194)},on:{click:function(t){return e.prevPage()}}})]),t("div",{attrs:{id:"next"}},[t("img",{attrs:{src:s(5130)},on:{click:function(t){return e.nextPage()}}})])])]),t("div",{staticClass:"slider_box"},[t("el-slider",{attrs:{id:"slider",max:e.sliderMax,"format-tooltip":e.sliderFormat,"show-tooltip":e.flag},on:{change:e.onProgressChange},model:{value:e.progress,callback:function(t){e.progress=t},expression:"progress"}})],1)])},f=[],p=(s(57658),s(55733),s(98610)),g=s(80119),m=s(66770),b={components:{noData:m["default"]},data(){return{loading:!1,goodsId:this.$route.query.goodsId,filesId:"",goodsFilePath:"",book:{},rendition:[],highlights:[],note:{},displayed:{},bijivisible:!1,muluvisible:!1,shezhivisible:!1,flag:!0,isRTL:!0,chapterName:"",readingLocation:"",readTime:"",progress:0,flow:"auto",mulu:void 0,num:16,locations:{},backclass:"zt_moren",backgroundList:[{backclass:"zt_moren",color:"#f8f4e9"},{backclass:"zt_niupizhi",color:"#dbcfa5"},{backclass:"zt_danlvse",color:"#ebf1e5"},{backclass:"zt_danlanse",color:"#e9f5f5"},{backclass:"zt_danfense",color:"#f4e9e9"},{backclass:"zt_huise",color:"#e6e2e2"},{backclass:"zt_heise",color:"#424242"}],sliderMax:100,sliderList:[],zwzt:"'Microsoft YaHei',PingFangSC-Regular,HelveticaNeue-Light,'Helvetica Neue Light',sans-serif",zwztList:[{value:"'Microsoft YaHei',PingFangSC-Regular,HelveticaNeue-Light,'Helvetica Neue Light',sans-serif",label:"雅黑"},{value:"STKaiti,Kaiti",label:"楷书"}],bookdetail:{},sourceList:[],readdefault:0,TimeParameter:10,readingTimeCount:0,setInterval2:void 0,setInterval1:void 0,isBookshelf:!1,cfiRange:"",Trial:!1,boxViewer:!0}},watch:{$route(){this.$route.query.goodsId}},created(){"true"==this.$route.query.isTrial?this.Trial=!0:this.Trial=!1},methods:{tabbook(e,t,s,i){if(localStorage.getItem("shezhisave")){var a=JSON.parse(localStorage.getItem("shezhisave"));this.num=a.num,this.zwzt=a.zwzt,this.backclass=a.backclass,this.$store.state.read.backclass=a.backclass}this.goodsFilePath=s,this.showEpub(i)},blurNumber(e,t){e.target.value||(this.num=12)},sliderFormat(e){return 0!=e&&(e=parseFloat(e).toFixed(0)+"%"),e},showEpub(e){const t=this.$loading({lock:!0,text:"Loading"});var s=this;let i=this.goodsFilePath.split(".epub")[0]+"/container.xml";this.book=new p.ZP(i),this.rendition=this.book.renderTo("viewer",{width:window.innerWidth-450,height:window.innerHeight-112,flow:this.flow}),e?this.rendition.display(e):this.rendition.display(),this.book.ready.then((()=>{document.getElementById("next");let e=function(e){37==(e.keyCode||e.which)&&("rtl"===s.book.package.metadata.direction?s.nextPage():s.prevPage()),38==(e.keyCode||e.which)&&("rtl"===s.book.package.metadata.direction?s.nextPage():s.prevPage()),39==(e.keyCode||e.which)&&("rtl"===s.book.package.metadata.direction?s.prevPage():s.nextPage()),40==(e.keyCode||e.which)&&("rtl"===s.book.package.metadata.direction?s.prevPage():s.nextPage())};s.rendition.on("keyup",e),document.addEventListener("keyup",e,!1)})),this.rendition.on("relocated",(function(e){var t="rtl"===s.book.package.metadata.direction?document.getElementById("prev"):document.getElementById("next"),i="rtl"===s.book.package.metadata.direction?document.getElementById("next"):document.getElementById("prev");e.atEnd?t.style.visibility="hidden":t.style.visibility="visible",e.atStart?i.style.visibility="hidden":i.style.visibility="visible"})),this.book.ready.then((()=>(this.navigation=s.book.navigation,s.book.locations.generate()))).then((()=>{this.locations=s.book.locations,this.bookAvailable=!0;const e=s.rendition.currentLocation(),t=Math.floor(1e4*s.locations.percentageFromCfi(e.start.cfi).toFixed(5))/100;s.progress=t})),this.book.loaded.navigation.then((function(e){e.length;s.sliderList=s.treeToArray(JSON.parse(JSON.stringify(e.toc))),s.mulu=e.toc,setTimeout((()=>{s.result(),t.close()}),1e3)})),this.rendition.on("selected",(e=>{this.cfiRange=e})),this.rendition.on("click",(e=>{"IMG"===e.srcElement.tagName&&(0,g.Z)({images:[e.srcElement.src],closeable:!0})})),this.rendition.on("mouseup",((e,t)=>{""!==this.cfiRange&&(t.window.getSelection().removeAllRanges(),this.book.getRange(this.cfiRange).then((e=>{s.isRTL=!1})))}))},treeToArray(e,t=[]){return e.forEach((e=>{const{subitems:s}=e;if(s&&(delete e.subitems,s.length))return t.push(e),this.treeToArray(s,t);t.push(e)})),t},onProgressChange(e){console.log(e);let t=e;e>10&&this.Trial?(this.$message("该商品试读结束"),t=10):t=e,this.progress=t;const s=t/100,i=s>0?this.locations.cfiFromPercentage(s):"";i?this.rendition.display(i):this.rendition.display()},result(){this.changezt({backclass:this.backclass}),this.numchange(),this.changezwzt(this.zwzt);var e="zt_heise"===this.backclass?"#ccc":"#000";this.rendition.themes.default({".epubjs-hl":{fill:"yellow","fill-opacity":"0.3","mix-blend-mode":"multiply"},body:{background:"rgba(255,255,255, 0)"},body:{color:e},body:{"background-size":"100%"},body:{"background-image":"none","background-size":"100%","background-repeat":"no-repeat"},video:{"max-width":"90%"}})},clickmulu(e){let t=this;this.rendition.display(e.href).then((()=>{const e=t.rendition.currentLocation(),s=Math.floor(1e4*t.locations.percentageFromCfi(e.start.cfi).toFixed(5))/100;if(t.progress=s,console.log(s),t.progress>10&&this.Trial){t.progress=10;const e=t.locations.cfiFromPercentage(t.progress/100);e&&this.rendition.display(e)}})),t.result(),t.muluvisible=!1},highlightClick(e){let t=this;setTimeout((()=>{this.rendition.display(e).then((()=>{const e=t.rendition.currentLocation(),s=Math.floor(1e4*t.locations.percentageFromCfi(e.start.cfi).toFixed(5))/100;t.progress=s})),this.result(),this.bijivisible=!1}),500)},changezt(e){this.backclass=e.backclass,this.$store.state.read.backclass=e.backclass},numchange(){this.num<=12?this.num=12:this.num>=48&&(this.num=48),this.shezhisave(),this.rendition.themes.fontSize(this.num+"px")},changezwzt(e){this.zwzt=e,this.rendition.themes.font(this.zwzt)},updateNote(e){this.isRTL=!1,this.note=this.highlights[e],this.$prompt("请输入笔记内容","提示",{inputValue:this.note.noteContent,inputType:"textarea",confirmButtonText:"确定",cancelButtonText:"取消",closeOnClickModal:!1,inputValidator:e=>!e||/^\s+$/.test(e)?"请输入笔记内容":e.length>100?"不能超过100字":void 0}).then((({value:e})=>{this.note.noteContent=e,(0,c.Vx)(this.note).then((e=>{this.$message({type:"success",message:"操作成功"}),this.bijivisible=!0,this.isRTL=!0}))})).catch((()=>{this.isRTL=!0}))},removeNote(e,t){this.$confirm("确认删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>(this.rendition.annotations.remove(e,"highlight"),(0,c.T8)(this.highlights[t].id).then((e=>{this.$message({type:"success",message:"删除成功"}),this.bijivisible=!0})),!1)))},shezhisave(){setTimeout((()=>{var e={num:this.num,backclass:this.backclass,zwzt:this.zwzt};localStorage.setItem("shezhisave",JSON.stringify(e))}),300)},prevPage(){let e=this;e.isRTL&&this.rendition.prev().then((()=>{const t=e.rendition.currentLocation(),s=Math.floor(1e4*e.locations.percentageFromCfi(t.start.cfi).toFixed(5))/100;e.progress=s}))},nextPage(){let e=this;const t=e.rendition.currentLocation();let s="";t&&(s=Math.floor(1e4*e.locations.percentageFromCfi(t.start.cfi).toFixed(5))/100,s>10&&this.Trial)?this.$message("该商品试读结束"):e.isRTL&&this.rendition.next().then((()=>{e.progress=s}))},addBookshelf(){},changeflow(){"auto"===this.flow?this.flow="scrolled":this.flow="auto",setTimeout((()=>{this.book.rendition.flow(this.flow),this.result(),this.rendition.display(this.rendition.location.start.cfi)}),100)},initNoteList(){(0,c.V$)(this.filesId).then((e=>{this.highlights=e.data;for(let t of e.data)this.rendition.annotations.remove(t.textRange,"highlight"),this.rendition.annotations.highlight(t.textRange,{},(e=>{}));this.loading=!1}))},getNoteList(){(0,c.V$)(this.filesId).then((e=>{this.highlights=e.data,this.loading=!1}))},updateOcReadSchedule(){const e=this.progress/100,t=e>0?this.locations.cfiFromPercentage(e):0;t&&0!=t&&this.$emit("readSchedule",t,e)}}},v=b,_=s(1001),y=(0,_.Z)(v,u,f,!1,null,"4ced6220",null),k=y.exports,I=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"read_center_box",attrs:{id:"read_center_box"}},[t("p",{staticClass:"dqyd"}),t("div",{attrs:{id:"box"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.boxViewer,expression:"boxViewer"}],staticStyle:{padding:"20px","box-sizing":"border-box"},attrs:{id:"viewer"}},[e.wsitch?t("div",{staticClass:"flipbook"},e._l(e.PdfItems,(function(e){return t("div",[t("div",{staticClass:"gradient"}),t("img",{attrs:{src:"http://"+e}})])})),0):e._e()])])]),t("div",{staticClass:"read_right_box"},[t("div",{staticClass:"read_right_box1"},[t("el-popover",{attrs:{placement:"left",width:"350",trigger:"click"},model:{value:e.shezhivisible,callback:function(t){e.shezhivisible=t},expression:"shezhivisible"}},[t("div",{staticClass:"shezhi"},[t("i",{staticClass:"el-icon-error",on:{click:function(t){e.shezhivisible=!1}}}),t("li",[t("p",[e._v("阅读主题")]),t("div",{staticClass:"xz_box ydzt"},e._l(e.backgroundList,(function(s,i){return t("span",{key:i,class:s.backclass===e.backclass?"active":"",style:"background: "+s.color,on:{click:function(t){e.changezt(s),e.result(),e.shezhisave()}}})})),0)])]),t("li",{attrs:{slot:"reference"},slot:"reference"},["zt_heise"!==e.backclass?t("img",{attrs:{src:s(40103)}}):e._e(),"zt_heise"===e.backclass?t("img",{attrs:{src:s(89001)}}):e._e(),t("p",[e._v("设置")])])]),t("li",{on:{click:e.fullScreen}},["zt_heise"!==e.backclass?t("img",{attrs:{src:s(89581)}}):e._e(),"zt_heise"===e.backclass?t("img",{attrs:{src:s(84798)}}):e._e(),t("p",[e._v("全屏阅读")])])],1),t("div",{staticClass:"read_right_box2"},[t("div",{attrs:{id:"prev"}},[t("img",{style:1===e.PdfIndex?"visibility:hidden":"",attrs:{src:s(90194)},on:{click:function(t){return e.previous()}}})]),t("div",{attrs:{id:"next"}},[t("img",{style:e.PdfIndex===e.PdfSize?"visibility:hidden":"",attrs:{src:s(5130)},on:{click:function(t){return e.next()}}})])])]),e.PdfSize>1?t("div",{staticClass:"slider_box"},[t("el-slider",{attrs:{min:1,max:e.PdfSize},on:{change:e.onProgressChange},model:{value:e.PdfIndex,callback:function(t){e.PdfIndex=t},expression:"PdfIndex"}})],1):e._e()])},T=[],x=(s(95715),s(55436),s(47489)),C={components:{},data(){return{backclass:"zt_moren",shezhivisible:!1,backgroundList:[{backclass:"zt_moren",color:"#f8f4e9"},{backclass:"zt_niupizhi",color:"#dbcfa5"},{backclass:"zt_danlvse",color:"#ebf1e5"},{backclass:"zt_danlanse",color:"#e9f5f5"},{backclass:"zt_danfense",color:"#f4e9e9"},{backclass:"zt_huise",color:"#e6e2e2"},{backclass:"zt_heise",color:"#424242"}],PdfItems:[],PdfIndex:1,PdfSize:1,slider:"",loading:!1,item:void 0,index:void 0,wsitch:!0,isBookshelf:!1,TrialPdfSize:"",Trial:!1,boxViewer:!0}},created(){"true"==this.$route.query.isTrial?this.Trial=!0:this.Trial=!1},methods:{tabbook(e,t,s){if(this.item=e,this.index=t,this.loading=this.$loading({lock:!0}),this.initbook(e,t,s),localStorage.getItem("shezhisave")){var i=JSON.parse(localStorage.getItem("shezhisave"));this.num=i.num,this.zwzt=i.zwzt,this.backclass=i.backclass,this.$store.state.read.backclass=i.backclass}},initbook(e,t,s){this.wsitch=!1,setTimeout((()=>{this.wsitch=!0,(0,c.Rd)({filePath:s}).then((e=>{if(this.PdfItems=e.data,this.PdfSize=e.data.length,this.Trial){let e=.1*this.PdfSize;this.TrialPdfSize=e.toFixed(),this.PdfSize<10&&(this.TrialPdfSize=1),this.PdfItems=this.PdfItems.slice(0,this.TrialPdfSize)}this.showEpub("")}))}),100)},onProgressChange(e){if(Number(this.TrialPdfSize)<e&&this.Trial)return this.PdfIndex=Number(this.TrialPdfSize),void this.$message("该商品试读结束");$(".flipbook").turn("page",this.PdfIndex)},showEpub(e){var t=this;setTimeout((function(){setTimeout((function(){$(".flipbook").turn({width:window.innerWidth-522,height:window.innerHeight-130,elevation:50,autoCenter:!0,when:{turned:function(e,s){t.PdfIndex=s}}})}),300),e>1&&setTimeout((()=>{$(".flipbook").turn("page",e)}),600),setTimeout((()=>{document.getElementById("next");let e=function(e){return 37==(e.keyCode||e.which)&&$(".flipbook").turn("previous"),38==(e.keyCode||e.which)&&$(".flipbook").turn("previous"),39==(e.keyCode||e.which)&&($(".flipbook").turn("next"),Number(t.TrialPdfSize)==t.PdfIndex&&t.Trial)||40==(e.keyCode||e.which)&&($(".flipbook").turn("next"),Number(t.TrialPdfSize)==t.PdfIndex&&t.Trial)?(t.$message("该商品试读结束"),void this.checkIsBuys()):void 0};document.addEventListener("keyup",e,!1)}),800),t.loading.close()}),100)},fullScreen(){this.loading=this.$loading({lock:!0}),x.Z.toggle(),this.wsitch=!1,setTimeout((()=>{this.wsitch=!0,setTimeout((()=>{this.tabbook(this.item,this.index),this.loading.close()}),100)}),100)},previous(){$(".flipbook").turn("previous")},next(){Number(this.TrialPdfSize)==this.PdfIndex&&this.Trial?this.$message("该商品试读结束"):$(".flipbook").turn("next")},result(){this.changezt({backclass:this.backclass});this.backclass},changezt(e){this.backclass=e.backclass,this.$store.state.read.backclass=e.backclass},shezhisave(){setTimeout((()=>{var e={num:this.num,backclass:this.backclass,zwzt:this.zwzt};localStorage.setItem("shezhisave",JSON.stringify(e))}),300)}}},P=C,w=(0,_.Z)(P,I,T,!1,null,"4a7a4d9f",null),z=w.exports,S=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"read_center_box",attrs:{id:"read_center_box"}},[t("div",{attrs:{id:"box"}},[t("div",{staticStyle:{padding:"20px","box-sizing":"border-box"},attrs:{id:"viewer"}},[t("iframe",{staticStyle:{width:"100%",height:"calc(100vh - 120px)"},attrs:{src:"https://view.officeapps.live.com/op/embed.aspx?src="+e.goodsFilePath}})])])]),t("div",{staticClass:"read_right_box"},[t("div",{staticClass:"read_right_box1"},[t("el-popover",{attrs:{placement:"left",width:"350",trigger:"click"},model:{value:e.shezhivisible,callback:function(t){e.shezhivisible=t},expression:"shezhivisible"}},[t("div",{staticClass:"shezhi"},[t("i",{staticClass:"el-icon-error",on:{click:function(t){e.shezhivisible=!1}}}),t("li",[t("p",[e._v("阅读主题")]),t("div",{staticClass:"xz_box ydzt"},e._l(e.backgroundList,(function(s,i){return t("span",{key:i,class:s.backclass===e.backclass?"active":"",style:"background: "+s.color,on:{click:function(t){e.changezt(s),e.result(),e.shezhisave()}}})})),0)])]),t("li",{attrs:{slot:"reference"},slot:"reference"},["zt_heise"!==e.backclass?t("img",{attrs:{src:s(40103)}}):e._e(),"zt_heise"===e.backclass?t("img",{attrs:{src:s(89001)}}):e._e(),t("p",[e._v("设置")])])]),t("li",{on:{click:e.fullScreen}},["zt_heise"!==e.backclass?t("img",{attrs:{src:s(89581)}}):e._e(),"zt_heise"===e.backclass?t("img",{attrs:{src:s(84798)}}):e._e(),t("p",[e._v("全屏阅读")])])],1)])])},R=[],N={components:{},data(){return{goodsFilePath:"",backclass:"zt_moren",shezhivisible:!1,backgroundList:[{backclass:"zt_moren",color:"#f8f4e9"},{backclass:"zt_niupizhi",color:"#dbcfa5"},{backclass:"zt_danlvse",color:"#ebf1e5"},{backclass:"zt_danlanse",color:"#e9f5f5"},{backclass:"zt_danfense",color:"#f4e9e9"},{backclass:"zt_huise",color:"#e6e2e2"},{backclass:"zt_heise",color:"#424242"}],loading:!1,wsitch:!0,isBookshelf:!1}},created(){},methods:{tabbook(e,t,s){if(this.loading=this.$loading({lock:!0}),localStorage.getItem("shezhisave")){var i=JSON.parse(localStorage.getItem("shezhisave"));this.num=i.num,this.zwzt=i.zwzt,this.backclass=i.backclass,this.$store.state.read.backclass=i.backclass}this.goodsFilePath=s,this.initbook(e,t,"")},initbook(e,t,s){this.readdefault=t,this.filesId=e.filesId,this.loading.close()},fullScreen(){this.loading=this.$loading({lock:!0}),x.Z.toggle(),this.wsitch=!1,setTimeout((()=>{this.wsitch=!0,setTimeout((()=>{this.tabbook(this.item,this.index),this.loading.close()}),100)}),100)},result(){this.changezt({backclass:this.backclass});this.backclass},changezt(e){this.backclass=e.backclass,this.$store.state.read.backclass=e.backclass},shezhisave(){setTimeout((()=>{var e={num:this.num,backclass:this.backclass,zwzt:this.zwzt};localStorage.setItem("shezhisave",JSON.stringify(e))}),300)}}},E=N,A=(0,_.Z)(E,S,R,!1,null,"1cb05899",null),F=A.exports,H=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"audio_box_s"},[t("div",[t("div",{staticClass:"audiotitlex"},[e._m(0),t("div",{staticClass:"fileName_box"},[e._v(" "+e._s(e.fileName)+" ")])])]),t("div",{staticClass:"_box"},[t("div",{staticClass:"image_box_row"},[t("el-image",{staticClass:"read_leftt1_imgx",attrs:{src:e.cover,fit:"contain"}})],1)]),t("div",{staticClass:"top"},[t("audioPlay",{ref:"audio",attrs:{url:e.filePath,title:e.fileName}})],1)])])},B=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"img_box"},[t("img",{staticClass:"img_box",attrs:{src:s(79052)}})])}],q=s(86264),L=s(39570),O={components:{videoPlayer:q.videoPlayer,audioPlay:L.Z},name:"xmlAudioRead",data(){return{}},props:{cover:{type:String,default:""},filePath:{type:String,default:""},fileName:{type:String,default:""}},created(){},methods:{tabbook(e,t,s){this.$refs.audio.onPlayerEnded()}}},M=O,U=(0,_.Z)(M,H,B,!1,null,"20a85b09",null),D=U.exports,V=function(){var e=this,t=e._self._c;return t("div",{staticClass:"video_box_s"},[t("div",{staticClass:"video_box"},[t("div",{staticClass:"audiotitlex"},[e._m(0),t("div",{staticClass:"fileName_box"},[e._v(" "+e._s(e.fileName)+" ")])]),t("div",{staticClass:"video_con"},[e.filePath?t("el-image",{attrs:{src:e.filePath,"preview-src-list":e.imgList}}):e._e()],1)])])},X=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"img_box"},[t("img",{staticClass:"img_box",attrs:{src:s(29861)}})])}],Z={name:"xmlImageRead",data(){return{}},props:{filePath:{type:String,default:""},fileName:{type:String,default:""}},computed:{imgList(){return[this.filePath]}},created(){this.stopEvent()},methods:{stopEvent(){document.oncontextmenu=function(e){return!1}}}},W=Z,J=(0,_.Z)(W,V,X,!1,null,"598bc7a2",null),j=J.exports,Y=function(){var e=this,t=e._self._c;return t("div",{staticClass:"video_box_s"},[t("div",{staticClass:"video_box"},[t("div",{staticClass:"audiotitlex"},[e._m(0),t("div",{staticClass:"fileName_box"},[e._v(e._s(e.fileName))])]),t("div",{staticClass:"video_con",on:{contextmenu:function(t){return t.preventDefault(),e.menuPlayer()}}},[e.goodsFilePath?t("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",attrs:{playsinline:!0,options:e.playerOptions}}):e._e()],1)])])},G=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"img_box"},[t("img",{staticClass:"img_box",attrs:{src:s(11397)}})])}],K={components:{videoPlayer:q.videoPlayer},computed:{playerOptions(){const e={playbackRates:[.5,.8,1,1.5,2,3,5],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!1,sources:[{type:"video/"+this.fileType,src:this.goodsFilePath}],poster:"",notSupportedMessage:"此视频暂无法播放...",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}};return e}},data(){return{fileName:"",goodsFilePath:"",loading:!1,fileType:"mp4"}},created(){$(document).ready((function(){$("#video").bind("contextmenu",(function(){return!1}))}))},methods:{tabbook(e,t,s){this.loading=this.$loading({lock:!0}),this.fileName=e.sourceName,this.goodsFilePath=s,this.loading.close()}}},Q=K,ee=(0,_.Z)(Q,Y,G,!1,null,"1385bc38",null),te=ee.exports,se=function(){var e=this,t=e._self._c;return t("div",{staticClass:"video_box_s"},[t("div",{staticClass:"video_box"},[t("div",{staticClass:"audiotitlex"},[e._m(0),t("div",{staticClass:"fileName_box"},[e._v(" "+e._s(e.fileName)+" ")])]),t("div",{staticClass:"_box"},[t("div",{staticClass:"image_box_row"},[t("img",{staticClass:"img_",attrs:{src:s(83105)}}),t("div",{staticClass:"text_"},[e._v(e._s(e.fileName))]),t("div",{staticClass:"text_"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.zipread}},[e._v("立即下载")])],1)])])])])},ie=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"img_box"},[t("img",{staticClass:"img_box",attrs:{src:s(29861)}})])}],ae=s(77997),oe={data(){return{fileName:"",goodsId:this.$route.query.goodsId,filesId:"",goodsFilePath:"",bookdetail:{},sourceList:[],readdefault:0,item:void 0,index:void 0,srcList:[],ouchnoss1:null,loading:!1,setInterval2:void 0,TimeParameter:10}},created(){this.stopEvent(),this.ouchnoss1=new ae.k(!0)},destroyed(){this.closeTime()},methods:{selectTimeParameter(){(0,c.Nl)().then((e=>{this.TimeParameter=e.data,this.setInterval2=setInterval((()=>{this.updateOcDownloadReading()}),6e4*this.TimeParameter)}))},closeTime(){clearInterval(this.setInterval2),this.setInterval2=null},updateOcDownloadReading(){(0,c.IM)({goodsFileId:this.filesId,goodsId:this.$route.query.goodsId,relevanceId:this.$route.query.relevanceId,resource:this.$route.query.resource,resourceType:this.$route.query.resourceType,teachInstId:this.$route.query.teachInstId}).then((e=>{}))},zipread(){""!=this.goodsFilePath&&this.ouchnoss1.downloadByUrl(this.goodsFilePath,this.fileName)},stopEvent(){document.oncontextmenu=function(e){return!1}},tabbook(e){this.fileName=e.sourceName,this.filesId=e.filesId,this.loading=this.$loading({lock:!0}),(0,c.Bi)({goodsFileId:e.filesId,fileType:e.fileType,goodsId:this.$route.query.goodsId,relevanceId:this.$route.query.relevanceId,resource:this.$route.query.resource,resourceType:this.$route.query.resourceType,teachInstId:this.$route.query.teachInstId}).then((t=>{this.loading.close();let s=t.data;s&&this.buys(e,s)}))},buys(e,t){this.payType=this.$route.query.payType?this.$route.query.payType:"goods",(0,d.kx)({relevanceId:this.goodsId,type:this.payType}).then((s=>{t.hasPermission?(this.goodsFilePath=t.filePath,this.selectTimeParameter()):"1"==s.data&&"2"==e.sourceStatus?(this.Trial=!0,this.goodsFilePath=t.filePath):(this.goodsFilePath="",this.checkIsBuys())}))},checkIsBuys(){this.$alert("该文件需要购买后才能阅读，是否确认购买","购买",{confirmButtonText:"立即购买",callback:e=>{if("cancel"===e)return;let t=this.$store.getters.userId;t?(this.payType=this.$route.query.payType?this.$route.query.payType:"goods",(0,d.kx)({relevanceId:this.goodsId,type:this.payType}).then((e=>{console.log("是否已购买响应",e),"2"!==e.data?"1"===e.data?this.$router.push({path:"/submitOrder/index",query:{id:this.$route.query.goodsId,from:"bookstore"}}):this.$message("该商品已购买无需重复购买"):this.$message.error("数据异常")}))):(this.$store.commit("SET_REDIRECTPARAMS",{goodsId:this.$route.query.goodsId,relevanceId:this.$route.query.relevanceId,resource:this.$route.query.resource,resourceType:this.$route.query.resourceType}),this.$router.push({path:"/login",query:{redirectPath:"/onlineReading"}}))}})}}},re=oe,le=(0,_.Z)(re,se,ie,!1,null,"7be5e628",null),ne=le.exports,de=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"audio_box_s"},[t("div",[t("div",{staticClass:"audiotitlex"},[e._m(0),t("div",{staticClass:"fileName_box"},[e._v(" "+e._s(e.fileName)+" ")])])]),t("iframe",{staticClass:"iframe",attrs:{src:e.goodsFilePath,frameborder:"0",width:"99%"}})])])},ce=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"img_box"},[t("img",{staticClass:"img_box",attrs:{src:s(56799)}})])}],he={components:{videoPlayer:q.videoPlayer,audioPlay:L.Z},data(){return{fileName:"",goodsFileId:void 0,goodsId:this.$route.query.goodsId,filesId:"",relevanceId:void 0,resource:void 0,resourceType:void 0,teachInstId:void 0,goodsFilePath:"",readdefault:0,loading:!1,play:!1,setInterval2:void 0,TimeParameter:10}},props:{},created(){},destroyed(){this.closeTime()},methods:{selectTimeParameter(){(0,c.Nl)().then((e=>{this.TimeParameter=e.data,this.setInterval2=setInterval((()=>{this.updateOcDownloadReading()}),6e4*this.TimeParameter)}))},closeTime(){clearInterval(this.setInterval2),this.setInterval2=null},updateOcDownloadReading(){(0,c.IM)({goodsFileId:this.filesId,goodsId:this.$route.query.goodsId,relevanceId:this.$route.query.relevanceId,resource:this.$route.query.resource,resourceType:this.$route.query.resourceType,teachInstId:this.$route.query.teachInstId}).then((e=>{}))},tabbook(e){this.loading=this.$loading({lock:!0}),this.goodsFileId=e.filesId,this.fileName=e.sourceName,this.filesId=e.filesId,(0,c.Bi)({goodsFileId:e.filesId,fileType:e.fileType,goodsId:this.$route.query.goodsId,relevanceId:this.$route.query.relevanceId,resource:this.$route.query.resource,resourceType:this.$route.query.resourceType,teachInstId:this.$route.query.teachInstId}).then((t=>{this.loading.close();let s=t.data;s&&this.buys(e,s)}))},buys(e,t){this.payType=this.$route.query.payType?this.$route.query.payType:"goods",(0,d.kx)({relevanceId:this.goodsId,type:this.payType}).then((s=>{if(t.hasPermission){let e=t.filePath,s=h.fileURL+"/goods_file"+e.split("goods_file")[1].split(".")[0];this.goodsFilePath=s,this.selectTimeParameter()}else if("1"==s.data&&"2"==e.sourceStatus){this.Trial=!0,this.goodsFilePath=t.filePath;let e=h.fileURL+"/goods_file"+goodsFilePath.split("goods_file")[1].split(".")[0];this.goodsFilePath=e}else this.goodsFilePath="",this.checkIsBuys()}))},checkIsBuys(){this.$alert("该文件需要购买后才能阅读，是否确认购买","购买",{confirmButtonText:"立即购买",callback:e=>{if("cancel"===e)return;let t=this.$store.getters.userId;t?(this.payType=this.$route.query.payType?this.$route.query.payType:"goods",(0,d.kx)({relevanceId:this.goodsId,type:this.payType}).then((e=>{console.log("是否已购买响应",e),"2"!==e.data?"1"===e.data?this.$router.push({path:"/submitOrder/index",query:{id:this.$route.query.goodsId,from:"bookstore"}}):this.$message("该商品已购买无需重复购买"):this.$message.error("数据异常")}))):(this.$store.commit("SET_REDIRECTPARAMS",{goodsId:this.$route.query.goodsId,relevanceId:this.$route.query.relevanceId,resource:this.$route.query.resource,resourceType:this.$route.query.resourceType}),this.$router.push({path:"/login",query:{redirectPath:"/onlineReading"}}))}})}}},ue=he,fe=(0,_.Z)(ue,de,ce,!1,null,"03dcb7ef",null),pe=fe.exports,ge=function(){var e=this,t=e._self._c;return t("div",{staticClass:"video_box_s"},[t("div",{staticClass:"video_box"},[t("div",{staticClass:"audiotitlex"},[e._m(0),t("div",{staticClass:"fileName_box"},[e._v(" "+e._s(e.fileName)+" ")])]),t("div",{staticClass:"video_con"},[t("iframe",{staticClass:"iframe",attrs:{src:e.src,frameborder:"0",id:"iframe"}})])])])},me=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"img_box"},[t("img",{staticClass:"img_box",attrs:{src:s(29861)}})])}],be=s(28267),ve=s(63683),_e={data(){return{src:"",fileName:"",goodsId:this.$route.query.goodsId,filesId:"",bookdetail:{},sourceList:[],readdefault:0,item:void 0,index:void 0,srcList:[],loading:!1,setInterval2:void 0,TimeParameter:10}},created(){},destroyed(){this.closeTime()},methods:{looseleaf(e){(0,ve.BF)().then((t=>{let s={token:t.data,pageType:"pc",businessType:e.type,looseLeafId:"",textBookId:"",isTrial:this.$route.query.isTrial||!1};"looseLeaf"==e.type?s.looseLeafId=e.filesId:s.textBookId=e.filesId,(0,be.vG)(s).then((e=>{200==e.code&&(this.src=e.data)}))}))},selectTimeParameter(){(0,c.Nl)().then((e=>{this.TimeParameter=e.data,this.setInterval2=setInterval((()=>{this.updateOcDownloadReading()}),6e4*this.TimeParameter)}))},closeTime(){clearInterval(this.setInterval2),this.setInterval2=null},updateOcDownloadReading(){(0,c.IM)({goodsFileId:this.filesId,goodsId:this.$route.query.goodsId,relevanceId:this.$route.query.relevanceId,resource:this.$route.query.resource,resourceType:this.$route.query.resourceType,teachInstId:this.$route.query.teachInstId}).then((e=>{}))},tabbook(e){this.fileName=e.sourceName,this.filesId=e.filesId,this.loading=this.$loading({lock:!0}),(0,d.Mt)({goodsFileId:e.filesId,fileType:e.fileType,goodsId:this.$route.query.goodsId,relevanceId:this.$route.query.relevanceId,resource:this.$route.query.resource,resourceType:this.$route.query.resourceType,teachInstId:this.$route.query.teachInstId}).then((t=>{this.loading.close();let s=t.data;s&&this.buys(e,s)}))},buys(e,t){this.payType=this.$route.query.payType?this.$route.query.payType:"goods",(0,d.kx)({relevanceId:this.goodsId,type:this.payType}).then((s=>{t.hasPermission?(this.looseleaf(e),this.selectTimeParameter()):"1"==s.data&&"2"==e.sourceStatus?(this.Trial=!0,this.looseleaf(e)):this.checkIsBuys()}))},checkIsBuys(){this.$alert("该文件需要购买后才能阅读，是否确认购买","购买",{confirmButtonText:"立即购买",callback:e=>{if("cancel"===e)return;let t=this.$store.getters.userId;t?(this.payType=this.$route.query.payType?this.$route.query.payType:"goods",(0,d.kx)({relevanceId:this.goodsId,type:this.payType}).then((e=>{console.log("是否已购买响应",e),"2"!==e.data?"1"===e.data?this.$router.push({path:"/submitOrder/index",query:{id:this.$route.query.goodsId,from:"bookstore"}}):this.$message("该商品已购买无需重复购买"):this.$message.error("数据异常")}))):(this.$store.commit("SET_REDIRECTPARAMS",{goodsId:this.$route.query.goodsId,relevanceId:this.$route.query.relevanceId,resource:this.$route.query.resource,resourceType:this.$route.query.resourceType}),this.$router.push({path:"/login",query:{redirectPath:"/onlineReading"}}))}})}}},ye=_e,ke=(0,_.Z)(ye,ge,me,!1,null,"757f53d6",null),Ie=ke.exports,Te={components:{epubread:k,pdfread:z,pweread:F,audioread:D,imgread:j,videoread:te,zipread:ne,htmlread:pe,leaflet:Ie,integralBox:l.Z},computed:{...(0,n.Se)(["backclass"])},data(){return{goodsFilePath:"",bookdetail:{},sourceList:[],readdefault:0,readtype:"",coverFiles:[],goodsTypeList:[],ouchnoss1:null,first:!0,goods_index:"",goodsTypes:"",isTrial:!1,purchasePath:"",TimeParameter:1,setInterval2:null,readingLocation:"epubcfi(/6/10!/4,/2[isbn9787304098780_1]/1:0,/8/2/1:1)"}},watch:{$route(){}},destroyed(){clearInterval(this.setInterval2)},created(){let e=this.$route.query;this.purchasePath=e.purchasePath;let t="";t=e.purchasePath?"goodsId="+e.goodsId+"&sysId="+e.sysId+"&platform="+e.platform+"&isTrial="+e.isTrial+"&userFlag="+e.userFlag+"&purchasePath="+e.purchasePath:"goodsId="+e.goodsId+"&sysId="+e.sysId+"&platform="+e.platform+"&isTrial="+e.isTrial+"&userFlag="+e.userFlag;let s=r()(h.salt+t);e.sign==s?(this.readdefault=this.$route.query.readdefault||0,this.isTrial=this.$route.query.isTrial||!1,this.goodsInfoDetail(),(0,d.KR)("oc_resource_file").then((e=>{this.goodsTypeList=e.data}))):this.$message.error("未查询到商品数据.")},methods:{readSchedule(e,t){let s={goodsFileId:this.sourceList[this.readdefault].filesId,goodsId:this.$route.query.goodsId,platformCode:this.$route.query.sysId,readingLocation:e,stuNum:this.$route.query.userFlag||0,readSchedule:t||0};(0,d.V2)(s)},goodsInfoDetail(){(0,d.nC)(this.$route.query.goodsId).then((e=>{this.bookdetail=e.data.goods||{},this.sourceList=e.data.sourceList,this.coverFiles=e.data.coverFiles,this.coverFiles.length>0&&(this.cover_fullUrl=this.coverFiles[0].fullUrl),this.goodsTypes=e.data.goods.goodsType,document.title=e.data.goods.goodsTitle||"开放云书院",this.getReadFileLink(this.readdefault)}))},getReadFileLink(e){(0,c.R4)({goodsId:this.$route.query.goodsId,filesId:this.sourceList[e].filesId,fileType:this.sourceList[e].fileType}).then((t=>{let s={goodsFileId:this.sourceList[this.readdefault].filesId,platformCode:this.$route.query.sysId,stuNum:this.$route.query.userFlag};(0,d.GC)(s).then((s=>{s.data?this.tabbook(this.sourceList[e],e,t.data.filePath,s.data.readingLocation):this.tabbook(this.sourceList[e],e,t.data.filePath,"")})),(0,c.Nl)().then((e=>{this.TimeParameter=e.data,this.setInterval2=setInterval((()=>{"epub"===this.readtype?this.$refs.epubread.updateOcReadSchedule():"pdf"===this.readtype?this.readSchedule(this.$refs.pdfread.PdfIndex,Number(this.$refs.pdfread.PdfIndex/this.$refs.pdfread.PdfItems.length)):this.readSchedule(0,0)}),6e4*this.TimeParameter)}))}))},tabbook(e,t,s,i){if(console.log(e),this.first)this.readdefault=t,this.first=!1;else{if(t===this.readdefault)return;this.readdefault=t}e.fileName?"PUB"===e.fileName.substring(e.fileName.length-3).toUpperCase()?"EPUB"===e.fileName.substring(e.fileName.length-4).toUpperCase()?(this.readtype="epub",setTimeout((()=>{this.$refs.epubread.tabbook(e,t,s,i)}),200)):this.$alert("资源升级中，暂不支持阅读此文件","提示",{confirmButtonText:"确定",callback:e=>{}}):"PDF"===e.fileName.substring(e.fileName.length-3).toUpperCase()?(this.readtype="pdf",setTimeout((()=>{this.$refs.pdfread.tabbook(e,t,s,i)}),200)):"PPT"===e.fileName.substring(e.fileName.length-3).toUpperCase()||"PTX"===e.fileName.substring(e.fileName.length-3).toUpperCase()||"OCX"===e.fileName.substring(e.fileName.length-3).toUpperCase()||"DOC"===e.fileName.substring(e.fileName.length-3).toUpperCase()||"XLS"===e.fileName.substring(e.fileName.length-3).toUpperCase()||"LSX"===e.fileName.substring(e.fileName.length-3).toUpperCase()?(this.readtype="pwe",setTimeout((()=>{this.$refs.pweread.tabbook(e,t,s,i)}),200)):"MP4"===e.fileName.substring(e.fileName.length-3).toUpperCase()||"WMV"===e.fileName.substring(e.fileName.length-3).toUpperCase()||"AVI"===e.fileName.substring(e.fileName.length-3).toUpperCase()?(this.readtype="videoread",setTimeout((()=>{this.$refs.videoread.tabbook(e,t,s,i)}),200)):"MP3"===e.fileName.substring(e.fileName.length-3).toUpperCase()?(this.readtype="audioread",setTimeout((()=>{this.$refs.audioread.tabbook(e,t,s,i)}),200)):"JPG"===e.fileName.substring(e.fileName.length-3).toUpperCase()||"PNG"===e.fileName.substring(e.fileName.length-3).toUpperCase()||"GIF"===e.fileName.substring(e.fileName.length-3).toUpperCase()||"BPM"===e.fileName.substring(e.fileName.length-3).toUpperCase()||"JPEG"===e.fileName.substring(e.fileName.length-4).toUpperCase()?(this.readtype="img",setTimeout((()=>{this.$refs.imgread.tabbook(e,t,s,i)}),200)):"ZIP"===e.fileName.substring(e.fileName.length-3).toUpperCase()||"RAR"===e.fileName.substring(e.fileName.length-3).toUpperCase()?"html"===this.bookdetail.resourceType&&"ZIP"===e.fileName.substring(e.fileName.length-3).toUpperCase()?(this.readtype="htmlread",setTimeout((()=>{this.$refs.htmlread.tabbook(e,t,this)}),200)):(this.readtype="zipread",setTimeout((()=>{this.$refs.zipread.tabbook(e,t,this)}),200)):"looseleafOrtextbook"==this.goodsTypes&&("looseLeaf"!=e.type&&"textBook"!=e.type||(this.readtype="leafletread",this.isTrial?this.$refs.leafletread.looseleaf(e,t):setTimeout((()=>{this.$refs.leafletread.tabbook(e,t)}),200))):"looseleafOrtextbook"==this.goodsTypes&&("looseLeaf"!=e.type&&"textBook"!=e.type||(this.readtype="leafletread",this.isTrial?setTimeout((()=>{this.$refs.leafletread.looseleaf(e,t)}),200):setTimeout((()=>{this.$refs.leafletread.tabbook(e,t,i)}),200)))},purchaseBut(){this.purchasePath&&window.open(this.purchasePath)}}},xe=Te,Ce=(0,_.Z)(xe,i,a,!1,null,"104d1302",null),Pe=Ce.exports},88495:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;
/**
 * [js-md5]{@link https://github.com/emn178/js-md5}
 *
 * @namespace md5
 * @version 0.7.3
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(){"use strict";var ERROR="input is invalid type",WINDOW="object"===typeof window,root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"===typeof self,NODE_JS=!root.JS_MD5_NO_NODE_JS&&"object"===typeof process&&process.versions&&process.versions.node;NODE_JS?root=__webpack_require__.g:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&module.exports,AMD=__webpack_require__.amdO,ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!==typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}!root.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"===typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e){return function(t){return new Md5(!0).update(t)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Md5},e.update=function(t){return e.create().update(t)};for(var t=0;t<OUTPUT_TYPES.length;++t){var s=OUTPUT_TYPES[t];e[s]=createOutputMethod(s)}return e},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"===typeof e)return crypto.createHash("md5").update(e,"utf8").digest("hex");if(null===e||void 0===e)throw ERROR;return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash("md5").update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod};function Md5(e){if(e)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t),this.blocks=new Uint32Array(t)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(e){if(!this.finalized){var t,s=typeof e;if("string"!==s){if("object"!==s)throw ERROR;if(null===e)throw ERROR;if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(e)))throw ERROR;t=!0}var i,a,o=0,r=e.length,l=this.blocks,n=this.buffer8;while(o<r){if(this.hashed&&(this.hashed=!1,l[0]=l[16],l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0),t)if(ARRAY_BUFFER)for(a=this.start;o<r&&a<64;++o)n[a++]=e[o];else for(a=this.start;o<r&&a<64;++o)l[a>>2]|=e[o]<<SHIFT[3&a++];else if(ARRAY_BUFFER)for(a=this.start;o<r&&a<64;++o)i=e.charCodeAt(o),i<128?n[a++]=i:i<2048?(n[a++]=192|i>>6,n[a++]=128|63&i):i<55296||i>=57344?(n[a++]=224|i>>12,n[a++]=128|i>>6&63,n[a++]=128|63&i):(i=65536+((1023&i)<<10|1023&e.charCodeAt(++o)),n[a++]=240|i>>18,n[a++]=128|i>>12&63,n[a++]=128|i>>6&63,n[a++]=128|63&i);else for(a=this.start;o<r&&a<64;++o)i=e.charCodeAt(o),i<128?l[a>>2]|=i<<SHIFT[3&a++]:i<2048?(l[a>>2]|=(192|i>>6)<<SHIFT[3&a++],l[a>>2]|=(128|63&i)<<SHIFT[3&a++]):i<55296||i>=57344?(l[a>>2]|=(224|i>>12)<<SHIFT[3&a++],l[a>>2]|=(128|i>>6&63)<<SHIFT[3&a++],l[a>>2]|=(128|63&i)<<SHIFT[3&a++]):(i=65536+((1023&i)<<10|1023&e.charCodeAt(++o)),l[a>>2]|=(240|i>>18)<<SHIFT[3&a++],l[a>>2]|=(128|i>>12&63)<<SHIFT[3&a++],l[a>>2]|=(128|i>>6&63)<<SHIFT[3&a++],l[a>>2]|=(128|63&i)<<SHIFT[3&a++]);this.lastByteIndex=a,this.bytes+=a-this.start,a>=64?(this.start=a-64,this.hash(),this.hashed=!0):this.start=a}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[t>>2]|=EXTRA[3&t],t>=56&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var e,t,s,i,a,o,r=this.blocks;this.first?(e=r[0]-680876937,e=(e<<7|e>>>25)-271733879<<0,i=(-1732584194^2004318071&e)+r[1]-117830708,i=(i<<12|i>>>20)+e<<0,s=(-271733879^i&(-271733879^e))+r[2]-1126478375,s=(s<<17|s>>>15)+i<<0,t=(e^s&(i^e))+r[3]-1316259209,t=(t<<22|t>>>10)+s<<0):(e=this.h0,t=this.h1,s=this.h2,i=this.h3,e+=(i^t&(s^i))+r[0]-680876936,e=(e<<7|e>>>25)+t<<0,i+=(s^e&(t^s))+r[1]-389564586,i=(i<<12|i>>>20)+e<<0,s+=(t^i&(e^t))+r[2]+606105819,s=(s<<17|s>>>15)+i<<0,t+=(e^s&(i^e))+r[3]-1044525330,t=(t<<22|t>>>10)+s<<0),e+=(i^t&(s^i))+r[4]-176418897,e=(e<<7|e>>>25)+t<<0,i+=(s^e&(t^s))+r[5]+1200080426,i=(i<<12|i>>>20)+e<<0,s+=(t^i&(e^t))+r[6]-1473231341,s=(s<<17|s>>>15)+i<<0,t+=(e^s&(i^e))+r[7]-45705983,t=(t<<22|t>>>10)+s<<0,e+=(i^t&(s^i))+r[8]+1770035416,e=(e<<7|e>>>25)+t<<0,i+=(s^e&(t^s))+r[9]-1958414417,i=(i<<12|i>>>20)+e<<0,s+=(t^i&(e^t))+r[10]-42063,s=(s<<17|s>>>15)+i<<0,t+=(e^s&(i^e))+r[11]-1990404162,t=(t<<22|t>>>10)+s<<0,e+=(i^t&(s^i))+r[12]+1804603682,e=(e<<7|e>>>25)+t<<0,i+=(s^e&(t^s))+r[13]-40341101,i=(i<<12|i>>>20)+e<<0,s+=(t^i&(e^t))+r[14]-1502002290,s=(s<<17|s>>>15)+i<<0,t+=(e^s&(i^e))+r[15]+1236535329,t=(t<<22|t>>>10)+s<<0,e+=(s^i&(t^s))+r[1]-165796510,e=(e<<5|e>>>27)+t<<0,i+=(t^s&(e^t))+r[6]-1069501632,i=(i<<9|i>>>23)+e<<0,s+=(e^t&(i^e))+r[11]+643717713,s=(s<<14|s>>>18)+i<<0,t+=(i^e&(s^i))+r[0]-373897302,t=(t<<20|t>>>12)+s<<0,e+=(s^i&(t^s))+r[5]-701558691,e=(e<<5|e>>>27)+t<<0,i+=(t^s&(e^t))+r[10]+38016083,i=(i<<9|i>>>23)+e<<0,s+=(e^t&(i^e))+r[15]-660478335,s=(s<<14|s>>>18)+i<<0,t+=(i^e&(s^i))+r[4]-405537848,t=(t<<20|t>>>12)+s<<0,e+=(s^i&(t^s))+r[9]+568446438,e=(e<<5|e>>>27)+t<<0,i+=(t^s&(e^t))+r[14]-1019803690,i=(i<<9|i>>>23)+e<<0,s+=(e^t&(i^e))+r[3]-187363961,s=(s<<14|s>>>18)+i<<0,t+=(i^e&(s^i))+r[8]+1163531501,t=(t<<20|t>>>12)+s<<0,e+=(s^i&(t^s))+r[13]-1444681467,e=(e<<5|e>>>27)+t<<0,i+=(t^s&(e^t))+r[2]-51403784,i=(i<<9|i>>>23)+e<<0,s+=(e^t&(i^e))+r[7]+1735328473,s=(s<<14|s>>>18)+i<<0,t+=(i^e&(s^i))+r[12]-1926607734,t=(t<<20|t>>>12)+s<<0,a=t^s,e+=(a^i)+r[5]-378558,e=(e<<4|e>>>28)+t<<0,i+=(a^e)+r[8]-2022574463,i=(i<<11|i>>>21)+e<<0,o=i^e,s+=(o^t)+r[11]+1839030562,s=(s<<16|s>>>16)+i<<0,t+=(o^s)+r[14]-35309556,t=(t<<23|t>>>9)+s<<0,a=t^s,e+=(a^i)+r[1]-1530992060,e=(e<<4|e>>>28)+t<<0,i+=(a^e)+r[4]+1272893353,i=(i<<11|i>>>21)+e<<0,o=i^e,s+=(o^t)+r[7]-155497632,s=(s<<16|s>>>16)+i<<0,t+=(o^s)+r[10]-1094730640,t=(t<<23|t>>>9)+s<<0,a=t^s,e+=(a^i)+r[13]+681279174,e=(e<<4|e>>>28)+t<<0,i+=(a^e)+r[0]-358537222,i=(i<<11|i>>>21)+e<<0,o=i^e,s+=(o^t)+r[3]-722521979,s=(s<<16|s>>>16)+i<<0,t+=(o^s)+r[6]+76029189,t=(t<<23|t>>>9)+s<<0,a=t^s,e+=(a^i)+r[9]-640364487,e=(e<<4|e>>>28)+t<<0,i+=(a^e)+r[12]-421815835,i=(i<<11|i>>>21)+e<<0,o=i^e,s+=(o^t)+r[15]+530742520,s=(s<<16|s>>>16)+i<<0,t+=(o^s)+r[2]-995338651,t=(t<<23|t>>>9)+s<<0,e+=(s^(t|~i))+r[0]-198630844,e=(e<<6|e>>>26)+t<<0,i+=(t^(e|~s))+r[7]+1126891415,i=(i<<10|i>>>22)+e<<0,s+=(e^(i|~t))+r[14]-1416354905,s=(s<<15|s>>>17)+i<<0,t+=(i^(s|~e))+r[5]-57434055,t=(t<<21|t>>>11)+s<<0,e+=(s^(t|~i))+r[12]+1700485571,e=(e<<6|e>>>26)+t<<0,i+=(t^(e|~s))+r[3]-1894986606,i=(i<<10|i>>>22)+e<<0,s+=(e^(i|~t))+r[10]-1051523,s=(s<<15|s>>>17)+i<<0,t+=(i^(s|~e))+r[1]-2054922799,t=(t<<21|t>>>11)+s<<0,e+=(s^(t|~i))+r[8]+1873313359,e=(e<<6|e>>>26)+t<<0,i+=(t^(e|~s))+r[15]-30611744,i=(i<<10|i>>>22)+e<<0,s+=(e^(i|~t))+r[6]-1560198380,s=(s<<15|s>>>17)+i<<0,t+=(i^(s|~e))+r[13]+1309151649,t=(t<<21|t>>>11)+s<<0,e+=(s^(t|~i))+r[4]-145523070,e=(e<<6|e>>>26)+t<<0,i+=(t^(e|~s))+r[11]-1120210379,i=(i<<10|i>>>22)+e<<0,s+=(e^(i|~t))+r[2]+718787259,s=(s<<15|s>>>17)+i<<0,t+=(i^(s|~e))+r[9]-343485551,t=(t<<21|t>>>11)+s<<0,this.first?(this.h0=e+1732584193<<0,this.h1=t-271733879<<0,this.h2=s-1732584194<<0,this.h3=i+271733878<<0,this.first=!1):(this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+s<<0,this.h3=this.h3+i<<0)},Md5.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,s=this.h2,i=this.h3;return HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[15&s]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,s=this.h2,i=this.h3;return[255&e,e>>8&255,e>>16&255,e>>24&255,255&t,t>>8&255,t>>16&255,t>>24&255,255&s,s>>8&255,s>>16&255,s>>24&255,255&i,i>>8&255,i>>16&255,i>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var e,t,s,i="",a=this.array(),o=0;o<15;)e=a[o++],t=a[o++],s=a[o++],i+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[63&(e<<4|t>>>4)]+BASE64_ENCODE_CHAR[63&(t<<2|s>>>6)]+BASE64_ENCODE_CHAR[63&s];return e=a[o],i+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[e<<4&63]+"==",i};var exports=createMethod();COMMON_JS?module.exports=exports:(root.md5=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))})()},63683:function(e,t,s){"use strict";s.d(t,{$A:function(){return _},AQ:function(){return y},BF:function(){return k},E_:function(){return n},Ex:function(){return o},Hp:function(){return m},NB:function(){return p},Pw:function(){return x},Wn:function(){return b},bQ:function(){return h},hH:function(){return l},jv:function(){return u},l3:function(){return r},nC:function(){return d},nG:function(){return c},nq:function(){return v},s$:function(){return f},t5:function(){return T},wh:function(){return I},xk:function(){return g}});var i=s(84471),a=s(37182);function o(e){return(0,i.ZP)({url:a.V+"/web/api/homePage/bannerList",method:"get",params:e})}function r(e){return(0,i.ZP)({url:a.V+"/web/api/homePage/goodsList",method:"get",params:e})}function l(e){return(0,i.ZP)({url:a.V+"/web/api/homePage/goodBookList",method:"get",params:e})}function n(e){return(0,i.ZP)({url:a.V+"/web/goods/getGuessFavouriteNoLogin",method:"get",params:e})}function d(e){return(0,i.ZP)({url:a.V+"/web/goods/getGuessFavouriteForLogin",method:"get",params:e})}function c(e){return(0,i.ZP)({url:a.V+"/web/api/homePage/selHotBookList",method:"get",params:e})}function h(e){return(0,i.ZP)({url:a.V+"/web/api/homePage/selSubjectList",method:"get",params:e})}function u(e){return(0,i.ZP)({url:a.V+"/web/api/homePage/selAuthorList",method:"get",params:e})}function f(e){return(0,i.ZP)({url:a.V+"/web/api/homePage/selDeptList",method:"get",params:e})}function p(e){return(0,i.ZP)({url:a.V+"/web/api/homePage/selectNewsById",method:"get",params:e})}function g(e){return(0,i.ZP)({url:a.V+"/web/serch/selectBooks",method:"get",params:e})}function m(e){return(0,i.ZP)({url:a.V+"/web/serch/selectSubjects",method:"get",params:e})}function b(e){return(0,i.ZP)({url:a.V+"/web/serch/selectAuthors",method:"get",params:e})}function v(e){return(0,i.ZP)({url:a.V+"/web/serch/selectInst",method:"get",params:e})}function _(e){return(0,i.ZP)({url:a.V+"/web/api/homePage/selectNewsByType?type="+e,method:"get"})}function y(){return(0,i.ZP)({url:a.V+"/web/paper/getToken",method:"get"})}function k(){return(0,i.ZP)({url:a.V+"/web/looseleaf/getToken",method:"get"})}function I(){return(0,i.ZP)({url:a.V+"/web/config/getConfigKey",method:"get"})}function T(e){return(0,i.ZP)({url:a.V+"/Integral/insertIntegralsg",method:"get",params:e})}function x(e){return(0,i.ZP)({url:a.V+"/Integral/insertIntegrals",method:"get",params:e})}}}]);
//# sourceMappingURL=6999.dee68266.js.map