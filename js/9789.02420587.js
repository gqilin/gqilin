"use strict";(self["webpackChunkvue3_test"]=self["webpackChunkvue3_test"]||[]).push([[9789,6770],{66770:function(t,e,o){o.r(e),o.d(e,{default:function(){return u}});var r=function(){var t=this;t._self._c;return t._m(0)},s=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"no-data-box"},[e("span",{staticClass:"no_wrap"},[e("span",{staticClass:"no_data"},[e("img",{attrs:{src:o(89728)}}),e("p",{staticClass:"no_data_text"},[t._v("暂无数据")])])])])}],a={},n=a,i=o(1001),c=(0,i.Z)(n,r,s,!1,null,"7953425b",null),u=c.exports},49837:function(t,e,o){o.d(e,{Z:function(){return C}});var r=function(){var t=this,e=t._self._c;return e("section",{staticClass:"cart-table"},[e("div",{staticClass:"cart-table-wrap content"},[e("ul",[e("li",{staticClass:"header ou-flex-center"},[e("div",{directives:[{name:"show",rawName:"v-show",value:"cart"===t.type,expression:"type === 'cart'"}],staticClass:"goods-check"},[e("el-checkbox",{attrs:{indeterminate:t.isIndeterminate,disabled:!t.getCartNum},model:{value:t.isAllCheck,callback:function(e){t.isAllCheck=e},expression:"isAllCheck"}},[t._v("全选")])],1),t._m(0),e("div",{staticClass:"goods-price ou-expand"},[t._v(" "+t._s("cart"===t.type?"售价":"原价")+" ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:"cart"===t.type,expression:"type === 'cart'"}],staticClass:"goods-action ou-expand"},[t._v(" 操作 ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:"preOrder"===t.type,expression:"type === 'preOrder'"}],staticClass:"goods-action ou-expand"},[t._v(" 售价 ")])]),e("div",t._l(t.goodsList,(function(o,r){return e("cart-item",{key:r,attrs:{itemData:o,itemIndex:r,type:t.type}})})),1),"cart"===t.type&&0===t.getCartNum?e("div",[e("no-data"),e("div",{staticClass:"ou-flex-center ou-padding-md"},[e("el-button",{staticClass:"empty-link",attrs:{type:"primary"},on:{click:t.goBookStore}},[t._v("去逛逛")])],1)],1):t._e(),e("li",{directives:[{name:"show",rawName:"v-show",value:"cart"===t.type,expression:"type === 'cart'"}],staticClass:"bottom-bar"},[e("div",{staticClass:"goods-check"},[e("el-checkbox",{attrs:{indeterminate:t.isIndeterminate,disabled:!t.getCartNum},model:{value:t.isAllCheck,callback:function(e){t.isAllCheck=e},expression:"isAllCheck"}},[t._v("全选")])],1),e("div",{staticClass:"goods-bat-del"},[e("el-button",{staticClass:"ou-btn-text",attrs:{type:"text",icon:"el-icon-delete"},on:{click:t.deleteSelectedItems}},[t._v("移除")])],1),e("div",{staticClass:"goods-num ou-expand"},[t._v(" 已选择 "),e("span",{staticStyle:{color:"#ff5353"}},[t._v(t._s(t.getCheckNum))]),t._v(" 件商品 ")]),e("div",{staticClass:"goods-total ou-expand"},[t._v(" 合计: "),e("span",{staticClass:"price-span"},[t._v(t._s(t.getTotalPrice))])]),e("div",{staticClass:"goods-action ou-expand"},[e("el-button",{staticClass:"order-btn",on:{click:t.goPreOrder}},[t._v("结算")])],1)]),e("li",{directives:[{name:"show",rawName:"v-show",value:"preOrder"===t.type,expression:"type === 'preOrder'"}],staticClass:"bottom-bar order"},[e("div",[e("div",{staticClass:"inline-box"},[e("div",{staticClass:"goods-total ou-expand"},[t._v(" 实付: "),e("span",{staticClass:"price-span"},[t._v(t._s(t._f("paymentText")(t.totalPrice)))])]),e("div",{staticClass:"goods-action ou-expand"},[e("el-button",{staticClass:"order-btn",on:{click:function(e){return t.$emit("handlePay")}}},[t._v("去付款")])],1)]),e("div",{staticClass:"ou-text-tips"},[t._v("温馨提示：此类商品不支持退换货")])])])])])])},s=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"goods-info"},[e("div",{staticClass:"goods-cover"}),e("div",{staticClass:"goods-name"},[t._v("商品信息")])])}],a=(o(57658),o(54526)),n=(o(57976),o(19511)),i=o(85837),c=o(66770),u=function(){var t=this,e=t._self._c;return e("li",{staticClass:"goods-item"},[e("div",{directives:[{name:"show",rawName:"v-show",value:"cart"===t.type,expression:"type === 'cart'"}],staticClass:"goods-check"},[e("el-checkbox",{attrs:{value:t.itemData.isCheck},on:{change:function(e){return t.checkChange(e,t.itemIndex)}}})],1),e("div",{staticClass:"goods-info"},[e("div",{staticClass:"goods-cover",on:{click:t.goDetail}},[e("el-image",{attrs:{fit:"contain",src:t.itemData.cover}},[e("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[e("el-image",{attrs:{fit:"cover",src:o(68671)}})],1)])],1),e("div",{staticClass:"goods-name"},[e("span",{on:{click:t.goDetail}},[t._v(t._s(t.itemData.goodsTitle||t.itemData.subjectTitle))])])]),e("div",{staticClass:"goods-price ou-expand"},["cart"===t.type?e("span",{staticClass:"price-span"},[t._v(t._s(t._f("paymentText")(t.itemData.realPrice)))]):t._e(),e("span",{staticClass:"price-span",class:["cart"===t.type?"origin":"narmal"]},[t._v(t._s(t._f("paymentText")(t.itemData.prices)))])]),e("div",{directives:[{name:"show",rawName:"v-show",value:"cart"===t.type,expression:"type === 'cart'"}],staticClass:"goods-action ou-expand"},[e("el-button",{staticClass:"ou-btn-text",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(e){return t.deleteItem(e,t.itemData.id,t.itemData.goodsId)}}},[t._v("移除")])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:"preOrder"===t.type,expression:"type === 'preOrder'"}],staticClass:"goods-price ou-expand"},[e("span",{staticClass:"price-span"},[t._v(t._s(t.itemData.realPrice))])])])},d=[],l={name:"CartItem",props:{type:{type:String,default:"preOrder"},itemIndex:{type:Number,default:-1},itemData:{type:Object}},data(){return{visible:!1}},components:{},watch:{},filters:{paymentText(t){let e=" - ";return(t||0===t)&&(e=Number(t).toFixed(2)),e}},mounted(){},methods:{...(0,a.nv)(["updateShoppingCart","deleteShoppingCart","checkAll"]),checkChange(t,e){console.log("勾选",t,e),this.updateShoppingCart({key:e,prop:"isCheck",val:t})},deleteItem(t,e,o){this.$confirm("确定要移除该商品吗？","系统提示",{type:"warning"}).then((()=>{(0,n.Ge)({ids:e}).then((t=>{console.log("单条移除购物车商品返回",t),this.deleteShoppingCart(e),this.$message.success("移除成功")}))}))},goDetail(){this.itemData.isSubject?this.$router.push({path:"/special/specialDetail",query:{subjectId:this.itemData.subjectId}}):(0,i.nC)(this.itemData.goodsId).then((t=>{let e=t.data&&t.data.goods?t.data.goods.status:-1;5!==e&&6!==e?"train"!=this.itemData.resourceType?this.$router.push({path:"/bookstore/bookstoreDetail",query:{goodsId:this.itemData.goodsId}}):this.$router.push({path:"/willingLearn/bookstoreDetail",query:{goodsId:this.itemData.goodsId}}):this.$message.error(6===e?"该商品已紧急下架":"该商品已下架")})).catch((t=>{this.$message.error("获取商品详情失败, 暂时无法浏览")}))}}},p=l,h=o(1001),g=(0,h.Z)(p,u,d,!1,null,"54f1aa5a",null),m=g.exports,f={name:"CartTable",components:{CartItem:m,NoData:c["default"]},props:{type:{type:String,default:"preOrder"},totalPrice:{type:Number,default:0},goodsList:{type:Array,default:()=>[]}},data(){return{delConfirmVisible:!1}},watch:{},computed:{...(0,a.Se)(["getCartNum","getCheckNum","getTotalPrice","getIsAllCheck","getCheckGoods","userId"]),isAllCheck:{get(){return!!this.getCartNum&&this.getIsAllCheck},set(t){this.checkAll(t)}},isIndeterminate(){return 0!==this.getCheckNum&&!this.getIsAllCheck}},filters:{paymentText(t){let e=" - ";return(t||0===t)&&(e=Number(t).toFixed(2)),e}},mounted(){},methods:{...(0,a.nv)(["updateShoppingCart","deleteShoppingCart","checkAll"]),goBookStore(){this.$router.push("/bookstore/index")},goPreOrder(){let t="正常";if(0!==this.getCheckNum){for(let e=0;e<this.getCheckGoods.length;e++)(0,i.Uw)(this.getCheckGoods[e].goodsId).then((o=>{if(2!=o.data.status)return this.$message(this.getCheckGoods[e].goodsTitle+"已下架"),void(t="已下架")}));setTimeout((()=>{"正常"==t&&this.$router.push({path:"/submitOrder/index",query:{from:"cart"}})}),500)}else this.$message.error("请至少选择一件商品")},deleteSelectedItems(){let t=this.getCheckGoods;t.length?this.$confirm(`确定要移除已勾选的${this.getCheckNum}件商品吗？`,"系统提示",{type:"warning"}).then((()=>{let e=[];t.forEach((t=>e.push(t.id))),(0,n.Ge)({ids:e.join(",")}).then((t=>{console.log("批量移除购物车商品返回",t),this.$store.dispatch("GetShoppingCart").then((()=>{this.$message.success("移除成功")}))}))})):this.$message.error("尚未选择任何商品")}}},v=f,b=(0,h.Z)(v,r,s,!1,null,"d3ca2ede",null),C=b.exports},9789:function(t,e,o){o.r(e),o.d(e,{default:function(){return C}});var r=function(){var t=this,e=t._self._c;return e("section",{staticClass:"page cart"},[e("cart-table",{attrs:{goodsList:t.getShoppingCart,type:"cart"}}),e("section",{staticClass:"ou-card-box like-list"},[e("el-tabs",{on:{"tab-click":t.switchTab},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[e("el-tab-pane",{attrs:{label:"热卖推荐",name:"hot"}},[e("card-row",{attrs:{list:t.hotList}})],1),e("el-tab-pane",{attrs:{label:"猜你喜欢",name:"like"}},[e("card-row",{attrs:{list:t.likeList}})],1)],1)],1),e("div",{staticClass:"ou-card-bottom-gap"})],1)},s=[],a=(o(57658),o(54526)),n=o(63683),i=o(19511),c=o(49837),u=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"row-wrap"},t._l(t.list,(function(o,r){return e("li",{key:r,staticClass:"card-box",on:{click:function(e){return t.goDetail(o.goodsId,o)}}},[e("div",{staticClass:"card-wrap"},[e("div",{staticClass:"image-wrap"},[e("el-image",{staticStyle:{width:"170px",height:"170px"},attrs:{fit:"contain",src:o.cover}})],1),e("div",{staticClass:"card-info bottom"},[e("el-tag",{directives:[{name:"show",rawName:"v-show",value:!!o.sourceFile,expression:"!!item.sourceFile"}],staticClass:"ou-like-tag"},[t._v(t._s(o.sourceFile))]),e("div",{staticClass:"ou-like-title ou-expand ou-ellipsis"},[t._v(" "+t._s(o.goodsTitle)+" ")])],1)])])})),0)},d=[],l={name:"CardRow",props:{list:{type:Array}},data(){return{}},components:{},watch:{},mounted(){},methods:{goDetail(t,e){"train"!=e.goodsType?this.$router.push({path:"/bookstore/bookstoreDetail",query:{goodsId:t}}):this.$router.push({path:"/willingLearn/bookstoreDetail",query:{goodsId:t}})}}},p=l,h=o(1001),g=(0,h.Z)(p,u,d,!1,null,"6db56ad2",null),m=g.exports,f={name:"cart",components:{CartTable:c.Z,CardRow:m},data(){return{activeTab:"hot",hotList:[],likeList:[]}},watch:{},computed:{...(0,a.Se)(["getShoppingCart","userId"])},mounted(){(0,i.Wf)({userId:this.userId}).then((t=>{let{rows:e=[]}=t,o=[];e.map((t=>{o.push({...t,isCheck:!1})})),this.$store.dispatch("setShoppingCart",o)})),this.getHotRecommended()},methods:{switchTab(t,e){"hot"===t.name&&this.getHotRecommended(),"like"===t.name&&this.getUserLike()},getHotRecommended(){(0,n.hH)({pageNum:1,pageSize:6}).then((t=>{let e=t.data||[],o=[];e.forEach(((t,e)=>{if(e<=5){let{bookName:e,sourceFile:r,cover:s,bookId:a,goodsType:n}=t;o.push({goodsTitle:e,cover:s,sourceFile:r,goodsId:a,goodsType:n})}})),this.hotList=o})).catch((t=>this.hotList=[]))},getUserLike(){(0,n.nC)().then((t=>{let e=t.data||[];this.likeList=e})).catch((t=>this.likeList=[]))}}},v=f,b=(0,h.Z)(v,r,s,!1,null,"8f5285fc",null),C=b.exports},85837:function(t,e,o){o.d(e,{Cn:function(){return n},GC:function(){return _},KR:function(){return a},Mt:function(){return k},Qn:function(){return m},Uw:function(){return C},V2:function(){return y},Zt:function(){return w},_r:function(){return f},cC:function(){return v},hE:function(){return d},iG:function(){return l},kx:function(){return b},m8:function(){return u},nC:function(){return c},qH:function(){return h},sz:function(){return g},t5:function(){return i},yh:function(){return p}});var r=o(84471),s=o(37182);function a(t){return(0,r.ZP)({url:s.V+"/web/goods/getDictListByDictType?dictType="+t,method:"get"})}function n(t){return(0,r.ZP)({url:s.V+"/web/goods/getTreeSelectByType?catalogType="+t,method:"get"})}function i(t){return(0,r.ZP)({url:s.V+"/web/goods/selGoodsList",method:"post",data:t})}function c(t){return(0,r.ZP)({url:s.V+"/web/goods/selGoodsById?goodsId="+t,method:"get"})}function u(t){return(0,r.ZP)({url:s.V+"/web/goods/getRecomGoodsList?goodsId="+t,method:"get"})}function d(t){return(0,r.ZP)({url:s.V+"/web/goods/getRecomSubjectList?goodsId="+t,method:"get"})}function l(t){return(0,r.ZP)({url:s.V+"/web/goods/getEvaluateListByGoodsId",method:"get",params:t})}function p(t,e){return(0,r.ZP)({url:s.V+"/web/api/ocShoppingCart/addShoppingCart?goodsId="+t+"&userId="+e,method:"get"})}function h(t){return(0,r.ZP)({url:s.V+"/web/api/ocShoppingCart/isAddShoppingCart?goodsId="+t,method:"get"})}function g(t){return(0,r.ZP)({url:s.V+"/web/goods/addBookshelf",method:"get",params:t})}function m(t){return(0,r.ZP)({url:s.V+"/web/goods/isAddBookshelf",method:"get",params:t})}function f(t){return(0,r.ZP)({url:s.V+"/web/goods/delBookshelf",method:"get",params:t})}function v(t){return(0,r.ZP)({url:s.V+"/web/api/ocEvaluate/addReport",method:"post",data:t})}function b(t){return(0,r.ZP)({url:s.V+"/web/read/selectIsBuy",method:"get",params:t})}function C(t){return(0,r.ZP)({url:s.V+"/web/api/ocShoppingCart/selGoodsStatus?goodsId="+t,method:"get"})}function w(t){return(0,r.ZP)({url:s.V+"/web/api/ocShoppingCart/selSubjectStatus?id="+t,method:"get"})}function k(t){return(0,r.ZP)({url:s.V+"/web/read/isHavingPermissions",method:"POST",data:t})}function y(t){return(0,r.ZP)({url:s.V+"/web/otherRead/updateRecordAndSchedule",method:"POST",data:t})}function _(t){return(0,r.ZP)({url:s.V+"/web/otherRead/selectReadSchedule?goodsFileId="+t.goodsFileId+"&platformCode="+t.platformCode+"&stuNum="+t.stuNum,method:"GET"})}},63683:function(t,e,o){o.d(e,{$A:function(){return C},AQ:function(){return w},BF:function(){return k},E_:function(){return c},Ex:function(){return a},Hp:function(){return f},NB:function(){return g},Pw:function(){return x},Wn:function(){return v},bQ:function(){return l},hH:function(){return i},jv:function(){return p},l3:function(){return n},nC:function(){return u},nG:function(){return d},nq:function(){return b},s$:function(){return h},t5:function(){return _},wh:function(){return y},xk:function(){return m}});var r=o(84471),s=o(37182);function a(t){return(0,r.ZP)({url:s.V+"/web/api/homePage/bannerList",method:"get",params:t})}function n(t){return(0,r.ZP)({url:s.V+"/web/api/homePage/goodsList",method:"get",params:t})}function i(t){return(0,r.ZP)({url:s.V+"/web/api/homePage/goodBookList",method:"get",params:t})}function c(t){return(0,r.ZP)({url:s.V+"/web/goods/getGuessFavouriteNoLogin",method:"get",params:t})}function u(t){return(0,r.ZP)({url:s.V+"/web/goods/getGuessFavouriteForLogin",method:"get",params:t})}function d(t){return(0,r.ZP)({url:s.V+"/web/api/homePage/selHotBookList",method:"get",params:t})}function l(t){return(0,r.ZP)({url:s.V+"/web/api/homePage/selSubjectList",method:"get",params:t})}function p(t){return(0,r.ZP)({url:s.V+"/web/api/homePage/selAuthorList",method:"get",params:t})}function h(t){return(0,r.ZP)({url:s.V+"/web/api/homePage/selDeptList",method:"get",params:t})}function g(t){return(0,r.ZP)({url:s.V+"/web/api/homePage/selectNewsById",method:"get",params:t})}function m(t){return(0,r.ZP)({url:s.V+"/web/serch/selectBooks",method:"get",params:t})}function f(t){return(0,r.ZP)({url:s.V+"/web/serch/selectSubjects",method:"get",params:t})}function v(t){return(0,r.ZP)({url:s.V+"/web/serch/selectAuthors",method:"get",params:t})}function b(t){return(0,r.ZP)({url:s.V+"/web/serch/selectInst",method:"get",params:t})}function C(t){return(0,r.ZP)({url:s.V+"/web/api/homePage/selectNewsByType?type="+t,method:"get"})}function w(){return(0,r.ZP)({url:s.V+"/web/paper/getToken",method:"get"})}function k(){return(0,r.ZP)({url:s.V+"/web/looseleaf/getToken",method:"get"})}function y(){return(0,r.ZP)({url:s.V+"/web/config/getConfigKey",method:"get"})}function _(t){return(0,r.ZP)({url:s.V+"/Integral/insertIntegralsg",method:"get",params:t})}function x(t){return(0,r.ZP)({url:s.V+"/Integral/insertIntegrals",method:"get",params:t})}},57976:function(t,e,o){o.d(e,{Bl:function(){return f},Gn:function(){return m},HM:function(){return b},d5:function(){return C},eA:function(){return y},jH:function(){return w},jh:function(){return v},kx:function(){return g},y:function(){return k}});var r=o(84471),s=o(37182);const a=s.V+"/web/api/ocOrder/orderList",n=s.V+"/web/api/ocOrder/addOcOrder",i=s.V+"/web/api/ocOrder/addOcOrderSubject",c=(s.V,s.V+"/web/api/ocOrder/deleteById"),u=s.V+"/web/api/ocOrder/orderCountByStatus",d=s.V+"/web/api/ocOrder/updateOrderStatus",l=s.V+"/web/api/ocOrder/addOrderInMyResource",p=(s.V,s.V+"/web/IntegralRecord/list"),h=s.V+"/web/IntegralRecord/count",g=t=>(0,r.U2)(a,t),m=t=>(0,r.v_)(n,t),f=t=>(0,r.v_)(i,t),v=t=>(0,r.v_)(`${d}?id=${t.id}`),b=t=>(0,r.v_)(`${l}?id=${t.id}`),C=t=>(0,r.U2)(u,t),w=t=>(0,r.ZP)({url:c,method:"delete",params:t}),k=t=>(0,r.ZP)({url:p,method:"get",params:t}),y=t=>(0,r.ZP)({url:h,method:"get",params:t})},68671:function(t,e,o){t.exports=o.p+"img/default_img.09c6c54f.jpg"},89728:function(t,e,o){t.exports=o.p+"img/no_data.7d48eba9.png"}}]);
//# sourceMappingURL=9789.02420587.js.map