"use strict";(self["webpackChunkvue3_test"]=self["webpackChunkvue3_test"]||[]).push([[2190],{92190:function(e,t,r){r.r(t),r.d(t,{default:function(){return h}});var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"video_box_s"},[t("div",{staticClass:"video_box"},[t("div",{staticClass:"audiotitlex"},[e._m(0),t("div",{staticClass:"fileName_box"},[e._v(e._s(e.fileName))])]),t("div",{staticClass:"video_con",on:{contextmenu:function(t){return t.preventDefault(),e.menuPlayer()}}},[e.goodsFilePath?t("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",attrs:{playsinline:!0,options:e.playerOptions}}):e._e()],1)])])},s=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"img_box"},[t("img",{staticClass:"img_box",attrs:{src:r(11397)}})])}],n=(r(57658),r(7742)),i=(r(57976),r(86264)),u=r(85837),d={components:{videoPlayer:i.videoPlayer},computed:{playerOptions(){const e={playbackRates:[.5,.8,1,1.5,2,3,5],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!1,sources:[{type:"video/"+this.fileType,src:this.goodsFilePath}],poster:"",notSupportedMessage:"此视频暂无法播放...",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}};return e}},data(){return{fileName:"",goodsId:this.$route.query.goodsId,filesId:"",goodsFilePath:"",bookdetail:{},sourceList:[],readdefault:0,loading:!1,wsitch:!0,isBookshelf:!1,fileType:"mp4",setInterval2:void 0,TimeParameter:10}},created(){$(document).ready((function(){$("#video").bind("contextmenu",(function(){return!1}))}))},destroyed(){this.closeTime()},methods:{selectTimeParameter(){(0,n.Nl)().then((e=>{this.TimeParameter=e.data,this.setInterval2=setInterval((()=>{this.updateOcDownloadReading()}),6e4*this.TimeParameter)}))},closeTime(){clearInterval(this.setInterval2),this.setInterval2=null},updateOcDownloadReading(){(0,n.IM)({goodsFileId:this.filesId,goodsId:this.$route.query.goodsId,relevanceId:this.$route.query.relevanceId,resource:this.$route.query.resource,resourceType:this.$route.query.resourceType,teachInstId:this.$route.query.teachInstId}).then((e=>{}))},tabbook(e){this.filesId=e.filesId,this.loading=this.$loading({lock:!0}),this.fileName=e.sourceName,(0,n.Bi)({goodsFileId:e.filesId,fileType:e.fileType,goodsId:this.$route.query.goodsId,relevanceId:this.$route.query.relevanceId,resource:this.$route.query.resource,resourceType:this.$route.query.resourceType,teachInstId:this.$route.query.teachInstId}).then((t=>{this.loading.close();let r=t.data;r&&this.buys(e,r)}))},buys(e,t){this.payType=this.$route.query.payType?this.$route.query.payType:"goods",(0,u.kx)({relevanceId:this.goodsId,type:this.payType}).then((r=>{t.hasPermission?(this.goodsFilePath=t.filePath,this.selectTimeParameter()):"1"==r.data&&"2"==e.sourceStatus?(this.Trial=!0,this.goodsFilePath=t.filePath):(this.goodsFilePath="",this.checkIsBuys())}))},checkIsBuys(){this.$alert("该文件需要购买后才能阅读，是否确认购买","购买",{confirmButtonText:"立即购买",callback:e=>{if("cancel"===e)return;let t=this.$store.getters.userId;t?(this.payType=this.$route.query.payType?this.$route.query.payType:"goods",(0,u.kx)({relevanceId:this.goodsId,type:this.payType}).then((e=>{console.log("是否已购买响应",e),"2"!==e.data?"1"===e.data?this.$router.push({path:"/submitOrder/index",query:{id:this.$route.query.goodsId,from:"bookstore"}}):this.$message("该商品已购买无需重复购买"):this.$message.error("数据异常")}))):(this.$store.commit("SET_REDIRECTPARAMS",{goodsId:this.$route.query.goodsId,relevanceId:this.$route.query.relevanceId,resource:this.$route.query.resource,resourceType:this.$route.query.resourceType}),this.$router.push({path:"/login",query:{redirectPath:"/onlineReading"}}))}})},menuPlayer(){}}},a=d,c=r(1001),l=(0,c.Z)(a,o,s,!1,null,"0c00aea6",null),h=l.exports},85837:function(e,t,r){r.d(t,{Cn:function(){return i},GC:function(){return w},KR:function(){return n},Mt:function(){return P},Qn:function(){return f},Uw:function(){return b},V2:function(){return T},Zt:function(){return v},_r:function(){return y},cC:function(){return m},hE:function(){return c},iG:function(){return l},kx:function(){return I},m8:function(){return a},nC:function(){return d},qH:function(){return p},sz:function(){return g},t5:function(){return u},yh:function(){return h}});var o=r(84471),s=r(37182);function n(e){return(0,o.ZP)({url:s.V+"/web/goods/getDictListByDictType?dictType="+e,method:"get"})}function i(e){return(0,o.ZP)({url:s.V+"/web/goods/getTreeSelectByType?catalogType="+e,method:"get"})}function u(e){return(0,o.ZP)({url:s.V+"/web/goods/selGoodsList",method:"post",data:e})}function d(e){return(0,o.ZP)({url:s.V+"/web/goods/selGoodsById?goodsId="+e,method:"get"})}function a(e){return(0,o.ZP)({url:s.V+"/web/goods/getRecomGoodsList?goodsId="+e,method:"get"})}function c(e){return(0,o.ZP)({url:s.V+"/web/goods/getRecomSubjectList?goodsId="+e,method:"get"})}function l(e){return(0,o.ZP)({url:s.V+"/web/goods/getEvaluateListByGoodsId",method:"get",params:e})}function h(e,t){return(0,o.ZP)({url:s.V+"/web/api/ocShoppingCart/addShoppingCart?goodsId="+e+"&userId="+t,method:"get"})}function p(e){return(0,o.ZP)({url:s.V+"/web/api/ocShoppingCart/isAddShoppingCart?goodsId="+e,method:"get"})}function g(e){return(0,o.ZP)({url:s.V+"/web/goods/addBookshelf",method:"get",params:e})}function f(e){return(0,o.ZP)({url:s.V+"/web/goods/isAddBookshelf",method:"get",params:e})}function y(e){return(0,o.ZP)({url:s.V+"/web/goods/delBookshelf",method:"get",params:e})}function m(e){return(0,o.ZP)({url:s.V+"/web/api/ocEvaluate/addReport",method:"post",data:e})}function I(e){return(0,o.ZP)({url:s.V+"/web/read/selectIsBuy",method:"get",params:e})}function b(e){return(0,o.ZP)({url:s.V+"/web/api/ocShoppingCart/selGoodsStatus?goodsId="+e,method:"get"})}function v(e){return(0,o.ZP)({url:s.V+"/web/api/ocShoppingCart/selSubjectStatus?id="+e,method:"get"})}function P(e){return(0,o.ZP)({url:s.V+"/web/read/isHavingPermissions",method:"POST",data:e})}function T(e){return(0,o.ZP)({url:s.V+"/web/otherRead/updateRecordAndSchedule",method:"POST",data:e})}function w(e){return(0,o.ZP)({url:s.V+"/web/otherRead/selectReadSchedule?goodsFileId="+e.goodsFileId+"&platformCode="+e.platformCode+"&stuNum="+e.stuNum,method:"GET"})}},57976:function(e,t,r){r.d(t,{Bl:function(){return y},Gn:function(){return f},HM:function(){return I},d5:function(){return b},eA:function(){return T},jH:function(){return v},jh:function(){return m},kx:function(){return g},y:function(){return P}});var o=r(84471),s=r(37182);const n=s.V+"/web/api/ocOrder/orderList",i=s.V+"/web/api/ocOrder/addOcOrder",u=s.V+"/web/api/ocOrder/addOcOrderSubject",d=(s.V,s.V+"/web/api/ocOrder/deleteById"),a=s.V+"/web/api/ocOrder/orderCountByStatus",c=s.V+"/web/api/ocOrder/updateOrderStatus",l=s.V+"/web/api/ocOrder/addOrderInMyResource",h=(s.V,s.V+"/web/IntegralRecord/list"),p=s.V+"/web/IntegralRecord/count",g=e=>(0,o.U2)(n,e),f=e=>(0,o.v_)(i,e),y=e=>(0,o.v_)(u,e),m=e=>(0,o.v_)(`${c}?id=${e.id}`),I=e=>(0,o.v_)(`${l}?id=${e.id}`),b=e=>(0,o.U2)(a,e),v=e=>(0,o.ZP)({url:d,method:"delete",params:e}),P=e=>(0,o.ZP)({url:h,method:"get",params:e}),T=e=>(0,o.ZP)({url:p,method:"get",params:e})},11397:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAATxJREFUOE+1071OAkEUhuF3ZgmLEl29Ejuvx2hlZaKJDVwCwd5YWxhtSNSCRC0gMRE7Ki2MjR2g4W8WljlmSYyoLLJrnHrOM9+ZOaPyB80cwj4olwRLsIFCH6pcsWkUJEI+z1VDlS+2DMhfIf9/IWsFAUYBpNNqjptT0xMtZRU7Gx7lSp/rW0PGBa1ngRHQyrJmb8sbJ2m8jji56PL4NCS7qCPSzQF9VNYfBpxedukZwf3RbgwoBAdDoVztU7kzpFKTrcaEQqzdtRSO3rB2sssYkAhUaobzmx6OA1olSPT8EnBc6tBoWRYy014vItGqp9nd9Gh3LKWrHvd1n2xGQ+QEREBh6vU1l2rNjItTzm9DGQGF1xgE8u1lZg34DGiOfzGxZQw1fSAdr/DrbhGC8PcXwG6DdpJggrVK1Nk79leuRjrJnbMAAAAASUVORK5CYII="}}]);
//# sourceMappingURL=2190.2748b9ee.js.map