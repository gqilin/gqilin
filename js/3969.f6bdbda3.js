"use strict";(self["webpackChunkvue3_test"]=self["webpackChunkvue3_test"]||[]).push([[3969],{33969:function(e,t,s){s.r(t),s.d(t,{default:function(){return y}});var a=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"audio_box_s"},[t("div",[t("div",{staticClass:"audiotitlex"},[e._m(0),t("div",{staticClass:"fileName_box"},[e._v(" "+e._s(e.fileName)+" ")])])]),t("div",{staticClass:"_box"},[t("div",{staticClass:"image_box_row"},[t("el-image",{staticClass:"read_leftt1_imgx",attrs:{src:e.select_index,fit:"contain"}})],1)]),t("div",{staticClass:"top"},[t("audioPlay",{ref:"audio",attrs:{url:e.goodsFilePath,title:e.fileName}})],1)])])},i=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"img_box"},[t("img",{staticClass:"img_box",attrs:{src:s(79052)}})])}],r=(s(57658),s(7742)),o=s(86264),l=s(85837),d=s(39570),u={components:{videoPlayer:o.videoPlayer,audioPlay:d.Z},data(){return{fileName:"",goodsFileId:void 0,goodsId:this.$route.query.goodsId,filesId:"",relevanceId:void 0,resource:void 0,resourceType:void 0,teachInstId:void 0,goodsFilePath:"",readdefault:0,loading:!1,play:!1,setInterval2:void 0,TimeParameter:10}},props:{select_index:String},created(){},destroyed(){this.closeTime()},methods:{selectTimeParameter(){(0,r.Nl)().then((e=>{this.TimeParameter=e.data,this.setInterval2=setInterval((()=>{this.updateOcDownloadReading()}),6e4*this.TimeParameter)}))},closeTime(){clearInterval(this.setInterval2),this.setInterval2=null},updateOcDownloadReading(){(0,r.IM)({goodsFileId:this.filesId,goodsId:this.$route.query.goodsId,relevanceId:this.$route.query.relevanceId,resource:this.$route.query.resource,resourceType:this.$route.query.resourceType,teachInstId:this.$route.query.teachInstId}).then((e=>{}))},tabbook(e){this.$refs.audio.onPlayerEnded(),this.loading=this.$loading({lock:!0}),this.goodsFileId=e.filesId,this.fileName=e.sourceName,this.filesId=e.filesId,(0,r.Bi)({goodsFileId:e.filesId,fileType:e.fileType,goodsId:this.$route.query.goodsId,relevanceId:this.$route.query.relevanceId,resource:this.$route.query.resource,resourceType:this.$route.query.resourceType,teachInstId:this.$route.query.teachInstId}).then((t=>{this.loading.close();let s=t.data;s&&this.buys(e,s)}))},buys(e,t){this.payType=this.$route.query.payType?this.$route.query.payType:"goods",(0,l.kx)({relevanceId:this.goodsId,type:this.payType}).then((s=>{t.hasPermission?(this.goodsFilePath=t.filePath,this.selectTimeParameter()):"1"==s.data&&"2"==e.sourceStatus?(this.Trial=!0,this.goodsFilePath=t.filePath):(this.goodsFilePath="",this.checkIsBuys())}))},checkIsBuys(){this.$alert("该文件需要购买后才能阅读，是否确认购买","购买",{confirmButtonText:"立即购买",callback:e=>{if("cancel"===e)return;let t=this.$store.getters.userId;t?(this.payType=this.$route.query.payType?this.$route.query.payType:"goods",(0,l.kx)({relevanceId:this.goodsId,type:this.payType}).then((e=>{console.log("是否已购买响应",e),"2"!==e.data?"1"===e.data?this.$router.push({path:"/submitOrder/index",query:{id:this.$route.query.goodsId,from:"bookstore"}}):this.$message("该商品已购买无需重复购买"):this.$message.error("数据异常")}))):(this.$store.commit("SET_REDIRECTPARAMS",{goodsId:this.$route.query.goodsId,relevanceId:this.$route.query.relevanceId,resource:this.$route.query.resource,resourceType:this.$route.query.resourceType}),this.$router.push({path:"/login",query:{redirectPath:"/onlineReading"}}))}})}}},n=u,c=s(1001),h=(0,c.Z)(n,a,i,!1,null,"0941c5e9",null),y=h.exports},39570:function(e,t,s){s.d(t,{Z:function(){return n}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"video-content"},[t("div",{staticClass:"title"},[e._v(e._s(e.title))]),t("div",{staticClass:"video_row"},[t("div",{staticClass:"buttn-box"},[t("div",{staticClass:"ply-btn",on:{click:function(t){return e.play()}}},[t("img",{attrs:{src:s(74449)("./"+(e.playState?"player.png":"play.png")),alt:""}})])]),t("div",{staticClass:"slider"},[t("div",{staticClass:"time-left"},[e._v(" "+e._s(e.getTime(Math.round(e.value)))+" ")]),t("van-slider",{attrs:{"bar-height":"6","active-color":"#479bd8","inactive-color":"#999999","button-size":"18",max:e.totalTime},on:{change:e.onChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),t("div",{staticClass:"time"},[e._v(" "+e._s(e.getTime(Math.round(e.totalTime)))+" ")]),t("img",{staticClass:"img_box",attrs:{src:s(99741)}}),t("div",{staticClass:"Sound"},[t("van-slider",{attrs:{"bar-height":"6","active-color":"#479bd8","inactive-color":"#999999","button-size":"18",max:e.unm},on:{change:e.changeSound},model:{value:e.sound,callback:function(t){e.sound=t},expression:"sound"}})],1)],1)]),t("audio",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"videoPlayer",attrs:{src:e.url,controls:"controls"},on:{play:function(t){return e.onPlayerPlay(t)},timeupdate:function(t){return e.onPlayerTimeupdate(t)},ended:e.onPlayerEnded}})])},i=[],r=s(86264),o={components:{videoPlayer:r.videoPlayer},data(){return{unm:100,sound:50,playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{src:this.url,type:"audio/mp3"}],poster:"",notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!1,durationDisplay:!1,remainingTimeDisplay:!1,progressControl:!1,fullscreenToggle:!1}},playState:!1,value:0,totalTime:0,player:null,duration:0}},props:{url:{type:String,default:""},title:{type:String,default:""},remark:{type:String,default:""}},watch:{url:{handler(){this.value=0}}},mounted(){var e=this.$refs.videoPlayer;let t=this;e.onloadedmetadata=function(){t.totalTime=e.duration}},methods:{onPlayerPlay(e){},play(){this.playState?(this.playState=!1,this.$refs.videoPlayer.pause()):(this.playState=!0,this.$refs.videoPlayer.play())},onChange(e){let t=e;this.$refs.videoPlayer.currentTime=t},changeSound(e){let t=this.$refs.videoPlayer;t.volume=e/100},onPlayerTimeupdate(e){this.value+=.25},onPlayerEnded(){this.playState=!1,this.value=0},getTime(e){let t=parseInt(e/60),s=e%60,a=(t>9?t:"0"+t)+":"+(s>9?s:"0"+s);return a}}},l=o,d=s(1001),u=(0,d.Z)(l,a,i,!1,null,"196243f8",null),n=u.exports}}]);
//# sourceMappingURL=3969.f6bdbda3.js.map