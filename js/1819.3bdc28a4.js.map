{"version":3,"file":"js/1819.3bdc28a4.js","mappings":"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","sources":["webpack://vue3_test/./src/components/noData.vue","webpack://vue3_test/src/components/noData.vue","webpack://vue3_test/./src/components/noData.vue?0d28","webpack://vue3_test/./src/components/noData.vue?934e","webpack://vue3_test/./src/views/user/notification/index.vue","webpack://vue3_test/src/views/user/notification/index.vue","webpack://vue3_test/./src/views/user/notification/index.vue?d7a9","webpack://vue3_test/./src/views/user/notification/index.vue?1306"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _vm._m(0)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"no-data-box\"},[_c('span',{staticClass:\"no_wrap\"},[_c('span',{staticClass:\"no_data\"},[_c('img',{attrs:{\"src\":require(\"@/assets/images/no_data.png\")}}),_c('p',{staticClass:\"no_data_text\"},[_vm._v(\"暂无数据\")])])])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n<div class=\"no-data-box\">\r\n  <span class=\"no_wrap\">\r\n    <span class=\"no_data\">\r\n      <img src=\"@/assets/images/no_data.png\">\r\n      <p class=\"no_data_text\">暂无数据</p>\r\n    </span>\r\n  </span>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nexport default {};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n/*暂无数据*/\r\n.no-data-box{\r\n  width: 100%;\r\n  height: 300px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  .no_wrap {\r\n  display: flex;\r\n  .no_data {\r\n    margin: 20px auto;\r\n    text-align: center;\r\n    img{\r\n      width: 220px;\r\n      height: 220px;\r\n    }\r\n    p{\r\n      color: #999;\r\n      margin: 0;\r\n      margin-top: -30px;\r\n    }\r\n  }\r\n}\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./noData.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./noData.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./noData.vue?vue&type=template&id=7953425b&scoped=true&\"\nimport script from \"./noData.vue?vue&type=script&lang=js&\"\nexport * from \"./noData.vue?vue&type=script&lang=js&\"\nimport style0 from \"./noData.vue?vue&type=style&index=0&id=7953425b&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7953425b\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('section',{staticClass:\"page notification\"},[_c('div',{staticClass:\"header-wrap\"},[_c('div',{staticClass:\"menu-bar\"},[_c('el-dropdown',{attrs:{\"size\":\"medium\"},on:{\"command\":_vm.switchSourceType}},[_c('el-button',{staticClass:\"menu-btn\",attrs:{\"type\":\"text\"}},[_vm._v(\" \"+_vm._s(_vm.currentSourceTypeText)),_c('i',{staticClass:\"el-icon-caret-bottom el-icon--right\"})]),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',{attrs:{\"command\":\"0\"}},[_vm._v(\"全部消息\")]),_c('el-dropdown-item',{attrs:{\"command\":\"1\"}},[_vm._v(\"系统消息\")]),_c('el-dropdown-item',{attrs:{\"command\":\"2\"}},[_vm._v(\"机构消息\")])],1)],1)],1),_c('div',{staticClass:\"search-bar\"},[_c('el-button',{staticClass:\"all-readed-btn\",on:{\"click\":_vm.setAllReaded}},[_vm._v(\" 全部标为已读 \")]),_c('div',{staticClass:\"custom-search\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.searchParams.messageTitle),expression:\"searchParams.messageTitle\",modifiers:{\"trim\":true}}],staticClass:\"custom-input\",attrs:{\"type\":\"text\",\"placeholder\":\"请输入\"},domProps:{\"value\":(_vm.searchParams.messageTitle)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.handleSearch(_vm.searchParams.messageTitle)},\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.searchParams, \"messageTitle\", $event.target.value.trim())},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('el-button',{staticClass:\"custom-button\",attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\"},on:{\"click\":function($event){return _vm.handleSearch(_vm.searchParams.messageTitle)}}},[_vm._v(\"搜索 \")])],1)],1)]),_c('div',{staticClass:\"list-wrap\"},[_vm._l((_vm.dataList),function(item,index){return _c('div',{key:index,staticClass:\"notice-wrap\",on:{\"click\":function($event){return _vm.dialogs(item)}}},[_c('div',{staticClass:\"title\",class:[item.status === '0' ? 'unread' : '']},[_vm._v(\" \"+_vm._s(item.messageTitle)+\" \")]),_c('div',{staticClass:\"content\"},[_vm._v(_vm._s(_vm.delHtmlTag(item.messageContent)))]),_c('div',{staticClass:\"cell-row\"},[_c('div',{staticClass:\"source\"},[_vm._v(_vm._s(_vm._f(\"sourceText\")((item.cpName || \"系统\"))))]),_c('div',{staticClass:\"time\"},[_vm._v(_vm._s(_vm._f(\"datetimeText\")(item.createTime)))])])])}),(_vm.isEmpty)?_c('div',[_c('no-data')],1):_vm._e()],2),(!_vm.isEmpty)?_c('div',{staticClass:\"pagination-box\"},[_c('el-pagination',{staticClass:\"ou-pagination\",attrs:{\"background\":\"\",\"hide-on-single-page\":\"\",\"current-page\":_vm.searchParams.pageNum,\"page-sizes\":[10, 15, 20, 25, 30],\"page-size\":_vm.searchParams.pageSize,\"layout\":\"total, prev, pager, next, sizes, jumper, slot\",\"total\":_vm.total},on:{\"size-change\":_vm.changePageSize,\"current-change\":_vm.changePageCurrent}},[_c('el-button',{staticClass:\"ou-page-go\",on:{\"click\":_vm.getNotificationList}},[_vm._v(\"GO\")])],1)],1):_vm._e(),_c('el-dialog',{attrs:{\"title\":\"消息详情\",\"visible\":_vm.dialogVisible,\"width\":\"50%\",\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',{staticClass:\"list-wrap listHeight\"},[_c('div',{staticClass:\"notice-wrap\"},[_c('div',{staticClass:\"title\",class:[_vm.dialogList.status === '0' ? 'unread' : '']},[_vm._v(\" \"+_vm._s(_vm.dialogList.messageTitle)+\" \")]),_c('div',{staticClass:\"content ql-editor ql-snow\",domProps:{\"innerHTML\":_vm._s(_vm.dialogList.messageContent)}}),_c('div',{staticClass:\"cell-row\"},[_c('div',{staticClass:\"source\"},[_vm._v(\" \"+_vm._s(_vm._f(\"sourceText\")((_vm.dialogList.cpName || \"系统\")))+\" \")]),_c('div',{staticClass:\"time\"},[_vm._v(_vm._s(_vm._f(\"datetimeText\")(_vm.dialogList.createTime)))])])])])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <section class=\"page notification\">\r\n    <div class=\"header-wrap\">\r\n      <div class=\"menu-bar\">\r\n        <el-dropdown size=\"medium\" @command=\"switchSourceType\">\r\n          <el-button class=\"menu-btn\" type=\"text\">\r\n            {{ currentSourceTypeText\r\n            }}<i class=\"el-icon-caret-bottom el-icon--right\"></i>\r\n          </el-button>\r\n          <el-dropdown-menu slot=\"dropdown\">\r\n            <el-dropdown-item command=\"0\">全部消息</el-dropdown-item>\r\n            <el-dropdown-item command=\"1\">系统消息</el-dropdown-item>\r\n            <el-dropdown-item command=\"2\">机构消息</el-dropdown-item>\r\n          </el-dropdown-menu>\r\n        </el-dropdown>\r\n      </div>\r\n      <div class=\"search-bar\">\r\n        <el-button class=\"all-readed-btn\" @click=\"setAllReaded\">\r\n          全部标为已读\r\n        </el-button>\r\n        <div class=\"custom-search\">\r\n          <input\r\n            type=\"text\"\r\n            class=\"custom-input\"\r\n            placeholder=\"请输入\"\r\n            v-model.trim=\"searchParams.messageTitle\"\r\n            @keyup.enter=\"handleSearch(searchParams.messageTitle)\"\r\n          />\r\n          <el-button\r\n            type=\"primary\"\r\n            icon=\"el-icon-search\"\r\n            class=\"custom-button\"\r\n            @click=\"handleSearch(searchParams.messageTitle)\"\r\n            >搜索\r\n          </el-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"list-wrap\">\r\n      <div\r\n        v-for=\"(item, index) in dataList\"\r\n        :key=\"index\"\r\n        class=\"notice-wrap\"\r\n        @click=\"dialogs(item)\"\r\n      >\r\n        <div class=\"title\" :class=\"[item.status === '0' ? 'unread' : '']\">\r\n          {{ item.messageTitle }}\r\n        </div>\r\n        <div class=\"content\">{{ delHtmlTag(item.messageContent) }}</div>\r\n        <div class=\"cell-row\">\r\n          <div class=\"source\">{{ (item.cpName || \"系统\") | sourceText }}</div>\r\n          <div class=\"time\">{{ item.createTime | datetimeText }}</div>\r\n        </div>\r\n      </div>\r\n      <div v-if=\"isEmpty\">\r\n        <no-data />\r\n      </div>\r\n    </div>\r\n    <div v-if=\"!isEmpty\" class=\"pagination-box\">\r\n      <el-pagination\r\n        class=\"ou-pagination\"\r\n        background\r\n        hide-on-single-page\r\n        @size-change=\"changePageSize\"\r\n        @current-change=\"changePageCurrent\"\r\n        :current-page=\"searchParams.pageNum\"\r\n        :page-sizes=\"[10, 15, 20, 25, 30]\"\r\n        :page-size=\"searchParams.pageSize\"\r\n        layout=\"total, prev, pager, next, sizes, jumper, slot\"\r\n        :total=\"total\"\r\n      >\r\n        <el-button @click=\"getNotificationList\" class=\"ou-page-go\"\r\n          >GO</el-button\r\n        >\r\n      </el-pagination>\r\n    </div>\r\n    <el-dialog\r\n      title=\"消息详情\"\r\n      :visible.sync=\"dialogVisible\"\r\n      width=\"50%\"\r\n      :before-close=\"handleClose\"\r\n    >\r\n      <div class=\"list-wrap listHeight\">\r\n        <div class=\"notice-wrap\">\r\n          <div\r\n            class=\"title\"\r\n            :class=\"[dialogList.status === '0' ? 'unread' : '']\"\r\n          >\r\n            {{ dialogList.messageTitle }}\r\n          </div>\r\n          <div\r\n            class=\"content ql-editor ql-snow\"\r\n            v-html=\"dialogList.messageContent\"\r\n          ></div>\r\n          <div class=\"cell-row\">\r\n            <div class=\"source\">\r\n              {{ (dialogList.cpName || \"系统\") | sourceText }}\r\n            </div>\r\n            <div class=\"time\">{{ dialogList.createTime | datetimeText }}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </el-dialog>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport \"quill/dist/quill.core.css\"; // 引入样式\r\nimport \"quill/dist/quill.snow.css\"; // snow theme\r\nimport \"quill/dist/quill.bubble.css\"; // bubble theme\r\nimport { mapGetters } from \"vuex\";\r\nimport {\r\n  apiGetNotificationList,\r\n  apiSetAllReaded,\r\n  apiselectInfo,\r\n} from \"@/api/user/profile\";\r\nimport NoData from \"@/components/noData.vue\";\r\nexport default {\r\n  name: \"notification\",\r\n  components: { NoData },\r\n  data() {\r\n    return {\r\n      dataList: [],\r\n      searchParams: {\r\n        pageNum: 1,\r\n        pageSize: 10,\r\n        messageTitle: \"\",\r\n        isSystem: \"0\",\r\n      },\r\n      dialogVisible: false,\r\n      dialogList: \"\",\r\n      total: 0,\r\n    };\r\n  },\r\n  watch: {},\r\n  computed: {\r\n    ...mapGetters([\"userId\"]),\r\n    currentSourceTypeText() {\r\n      let dict = {\r\n        0: \"全部消息\",\r\n        1: \"系统消息\",\r\n        2: \"机构消息\",\r\n      };\r\n      return dict[this.searchParams.isSystem];\r\n    },\r\n    isEmpty() {\r\n      return !this.dataList.length;\r\n    },\r\n  },\r\n  filters: {\r\n    sourceText(value) {\r\n      return value ? \"来源：\" + value : \"\";\r\n    },\r\n    datetimeText(value) {\r\n      if (!value) {\r\n        return \"\";\r\n      }\r\n      let date = value.split(\"T\")[0] || \"\";\r\n      let rest = value.split(\"T\")[1] || \"\";\r\n      return date + \" \" + rest.substr(0, 8);\r\n    },\r\n  },\r\n  activated() {\r\n    this.getNotificationList();\r\n  },\r\n  mounted() {},\r\n  methods: {\r\n    //已读\r\n    selectInfo(id) {\r\n      apiselectInfo({ messageId: id }).then((res) => {\r\n        if (res.code == 200) {\r\n          this.dialogVisible = true;\r\n          this.getNotificationList();\r\n        }\r\n      });\r\n    },\r\n    //消息弹窗\r\n    dialogs(item) {\r\n      this.dialogList = item;\r\n      this.selectInfo(item.messageId);\r\n    },\r\n    //关闭\r\n    handleClose(done) {\r\n      done();\r\n    },\r\n    delHtmlTag(str) {\r\n      if (!str) {\r\n        return \"-\";\r\n      } else {\r\n        str = str.replace(/<img [^>]*src=['\"]([^'\"]+)[^>]*>/g, \"<图片>\");\r\n        str = str.replace(/<[^>]+>/g, \"\");\r\n        return str;\r\n      }\r\n    },\r\n    getNotificationList() {\r\n      let { pageNum, pageSize, messageTitle, isSystem } = this.searchParams;\r\n      let params = { isSystem, pageSize, pageNum };\r\n      params = messageTitle\r\n        ? { ...params, messageTitle }\r\n        : { ...params, messageTitle: \"\" };\r\n      apiGetNotificationList(params).then((res) => {\r\n        let list = res.rows || [];\r\n        this.dataList = list;\r\n        this.total = res.total || 0;\r\n        // 此需求暂时废弃\r\n        // let unreadList = []\r\n        // list.map(item => {\r\n        //   if(item.status==='0') {\r\n        //     unreadList.push(item.messageId)\r\n        //   }\r\n        // })\r\n        // if(!unreadList.length) {\r\n        //   return\r\n        // }\r\n        // let ids = unreadList.join(',')\r\n        // apiSetHasRead({ids}).then(res => {\r\n        //   // 此处静默处理, 完成消息已读状态的设置但无需主动更新页面状态, 再次调用列表接口时更新即可\r\n        // })\r\n      });\r\n    },\r\n    setAllReaded() {\r\n      apiSetAllReaded().then((res) => {\r\n        // 主动全部标记为已读后刷新当前页\r\n        this.getNotificationList();\r\n      });\r\n    },\r\n    handleSearch() {\r\n      this.getNotificationList();\r\n    },\r\n    switchSourceType(value) {\r\n      this.searchParams.isSystem = value + \"\";\r\n      this.getNotificationList();\r\n    },\r\n    changePageSize(val) {\r\n      this.searchParams.pageSize = val;\r\n      this.getNotificationList();\r\n    },\r\n    changePageCurrent(val) {\r\n      this.searchParams.pageNum = val;\r\n      this.getNotificationList();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.page.notification ::v-deep {\r\n  background-color: #fffefd;\r\n  padding: 30px 0 6px;\r\n  .header-wrap {\r\n    position: relative;\r\n    display: flex;\r\n    height: 32px;\r\n    justify-content: space-between;\r\n    .menu-bar {\r\n      padding: 0 30px;\r\n      .el-button {\r\n        color: #666666;\r\n        padding: 0;\r\n      }\r\n    }\r\n    .all-readed-btn {\r\n      width: 90px;\r\n      height: 32px;\r\n      background: #ffffff;\r\n      border: 1px solid #f2f2f2;\r\n      border-radius: 6px;\r\n      font-size: 13px;\r\n      font-family: PingFang SC;\r\n      font-weight: 400;\r\n      color: #999999;\r\n      padding: 2px;\r\n      margin-right: 10px;\r\n      &:hover {\r\n        color: #2e9adb;\r\n        border-color: #2e9adb;\r\n      }\r\n    }\r\n    .search-bar {\r\n      position: absolute;\r\n      right: 30px;\r\n      top: 0;\r\n      height: 32px;\r\n      display: flex;\r\n      align-items: center;\r\n      .custom-search {\r\n        padding: 0;\r\n        border: none;\r\n        height: 100%;\r\n        align-items: center;\r\n        width: fit-content;\r\n      }\r\n    }\r\n  }\r\n  .list-wrap {\r\n    .notice-wrap {\r\n      padding: 20px 0 18px;\r\n      border-bottom: 1px solid #f2f2f2;\r\n      & > div {\r\n        padding: 0 30px;\r\n      }\r\n      .title {\r\n        font-size: 16px;\r\n        color: #333333;\r\n        font-weight: 400;\r\n        cursor: pointer;\r\n        &.unread {\r\n          display: flex;\r\n          align-items: center;\r\n          &::before {\r\n            content: \"\";\r\n            display: inline-block;\r\n            width: 5px;\r\n            height: 5px;\r\n            background-color: #ff5353;\r\n            border-radius: 50%;\r\n            margin-right: 5px;\r\n          }\r\n        }\r\n      }\r\n      .content {\r\n        font-size: 14px;\r\n        line-height: 1.2;\r\n        color: #999999;\r\n        font-weight: 400;\r\n        margin-top: 20px;\r\n        word-break: break-all;\r\n      }\r\n      .cell-row {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: space-between;\r\n        font-size: 12px;\r\n        color: #999999;\r\n        font-weight: 400;\r\n        margin-top: 18px;\r\n      }\r\n    }\r\n  }\r\n  .pagination-box {\r\n    text-align: right;\r\n    padding: 20px 30px;\r\n  }\r\n}\r\n.listHeight {\r\n  height: 66vh;\r\n  overflow-y: scroll;\r\n  overflow-x: hidden;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=f8669280&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=f8669280&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f8669280\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_self","_c","_m","staticRenderFns","staticClass","attrs","require","_v","component","on","switchSourceType","_s","currentSourceTypeText","slot","setAllReaded","directives","name","rawName","value","searchParams","messageTitle","expression","modifiers","domProps","$event","type","indexOf","_k","keyCode","key","handleSearch","target","composing","$set","trim","$forceUpdate","_l","dataList","item","index","dialogs","class","status","delHtmlTag","messageContent","_f","cpName","createTime","isEmpty","_e","pageNum","pageSize","total","changePageSize","changePageCurrent","getNotificationList","dialogVisible","handleClose","dialogList","components","NoData","data","isSystem","watch","computed","mapGetters","dict","length","filters","sourceText","datetimeText","date","split","rest","substr","activated","mounted","methods","selectInfo","id","apiselectInfo","messageId","then","res","code","done","str","replace","params","apiGetNotificationList","list","rows","apiSetAllReaded","val"],"sourceRoot":""}