"use strict";(self["webpackChunkvue3_test"]=self["webpackChunkvue3_test"]||[]).push([[2658],{42658:function(e,t,r){r.r(t),r.d(t,{default:function(){return l}});var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"video_box_s"},[t("div",{staticClass:"video_box"},[t("div",{staticClass:"audiotitlex"},[e._m(0),t("div",{staticClass:"fileName_box"},[e._v(" "+e._s(e.fileName)+" ")])]),t("div",{staticClass:"video_con"},[e.goodsFilePath?t("el-image",{attrs:{src:e.goodsFilePath,"preview-src-list":e.srcList}}):e._e()],1)])])},n=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"img_box"},[t("img",{staticClass:"img_box",attrs:{src:r(29861)}})])}],u=(r(57658),r(7742)),s=r(85837),i={data(){return{fileName:"",goodsId:this.$route.query.goodsId,filesId:"",goodsFilePath:"",bookdetail:{},sourceList:[],readdefault:0,item:void 0,index:void 0,srcList:[],loading:!1,setInterval2:void 0,TimeParameter:10}},created(){this.stopEvent()},destroyed(){this.closeTime()},methods:{stopEvent(){document.oncontextmenu=function(e){return!1}},selectTimeParameter(){(0,u.Nl)().then((e=>{this.TimeParameter=e.data,this.setInterval2=setInterval((()=>{this.updateOcDownloadReading()}),6e4*this.TimeParameter)}))},closeTime(){clearInterval(this.setInterval2),this.setInterval2=null},updateOcDownloadReading(){(0,u.IM)({goodsFileId:this.filesId,goodsId:this.$route.query.goodsId,relevanceId:this.$route.query.relevanceId,resource:this.$route.query.resource,resourceType:this.$route.query.resourceType,teachInstId:this.$route.query.teachInstId}).then((e=>{}))},tabbook(e){this.fileName=e.sourceName,this.filesId=e.filesId,this.loading=this.$loading({lock:!0}),(0,u.Bi)({goodsFileId:e.filesId,fileType:e.fileType,goodsId:this.$route.query.goodsId,relevanceId:this.$route.query.relevanceId,resource:this.$route.query.resource,resourceType:this.$route.query.resourceType,teachInstId:this.$route.query.teachInstId}).then((t=>{this.loading.close();let r=t.data;r&&this.buys(e,r)}))},buys(e,t){this.payType=this.$route.query.payType?this.$route.query.payType:"goods",(0,s.kx)({relevanceId:this.goodsId,type:this.payType}).then((r=>{t.hasPermission?(this.goodsFilePath=t.filePath,this.srcList.push(this.goodsFilePath),this.selectTimeParameter()):"1"==r.data&&"2"==e.sourceStatus?(this.Trial=!0,this.goodsFilePath=t.filePath,this.srcList.push(this.goodsFilePath)):(this.goodsFilePath="",this.checkIsBuys())}))},checkIsBuys(){this.$alert("该文件需要购买后才能阅读，是否确认购买","购买",{confirmButtonText:"立即购买",callback:e=>{if("cancel"===e)return;let t=this.$store.getters.userId;t?(this.payType=this.$route.query.payType?this.$route.query.payType:"goods",(0,s.kx)({relevanceId:this.goodsId,type:this.payType}).then((e=>{console.log("是否已购买响应",e),"2"!==e.data?"1"===e.data?this.$router.push({path:"/submitOrder/index",query:{id:this.$route.query.goodsId,from:"bookstore"}}):this.$message("该商品已购买无需重复购买"):this.$message.error("数据异常")}))):(this.$store.commit("SET_REDIRECTPARAMS",{goodsId:this.$route.query.goodsId,relevanceId:this.$route.query.relevanceId,resource:this.$route.query.resource,resourceType:this.$route.query.resourceType}),this.$router.push({path:"/login",query:{redirectPath:"/onlineReading"}}))}})}}},d=i,a=r(1001),c=(0,a.Z)(d,o,n,!1,null,"3eca57f4",null),l=c.exports},85837:function(e,t,r){r.d(t,{Cn:function(){return s},GC:function(){return v},KR:function(){return u},Mt:function(){return w},Qn:function(){return m},Uw:function(){return y},V2:function(){return V},Zt:function(){return P},_r:function(){return p},cC:function(){return I},hE:function(){return c},iG:function(){return l},kx:function(){return b},m8:function(){return a},nC:function(){return d},qH:function(){return f},sz:function(){return g},t5:function(){return i},yh:function(){return h}});var o=r(84471),n=r(37182);function u(e){return(0,o.ZP)({url:n.V+"/web/goods/getDictListByDictType?dictType="+e,method:"get"})}function s(e){return(0,o.ZP)({url:n.V+"/web/goods/getTreeSelectByType?catalogType="+e,method:"get"})}function i(e){return(0,o.ZP)({url:n.V+"/web/goods/selGoodsList",method:"post",data:e})}function d(e){return(0,o.ZP)({url:n.V+"/web/goods/selGoodsById?goodsId="+e,method:"get"})}function a(e){return(0,o.ZP)({url:n.V+"/web/goods/getRecomGoodsList?goodsId="+e,method:"get"})}function c(e){return(0,o.ZP)({url:n.V+"/web/goods/getRecomSubjectList?goodsId="+e,method:"get"})}function l(e){return(0,o.ZP)({url:n.V+"/web/goods/getEvaluateListByGoodsId",method:"get",params:e})}function h(e,t){return(0,o.ZP)({url:n.V+"/web/api/ocShoppingCart/addShoppingCart?goodsId="+e+"&userId="+t,method:"get"})}function f(e){return(0,o.ZP)({url:n.V+"/web/api/ocShoppingCart/isAddShoppingCart?goodsId="+e,method:"get"})}function g(e){return(0,o.ZP)({url:n.V+"/web/goods/addBookshelf",method:"get",params:e})}function m(e){return(0,o.ZP)({url:n.V+"/web/goods/isAddBookshelf",method:"get",params:e})}function p(e){return(0,o.ZP)({url:n.V+"/web/goods/delBookshelf",method:"get",params:e})}function I(e){return(0,o.ZP)({url:n.V+"/web/api/ocEvaluate/addReport",method:"post",data:e})}function b(e){return(0,o.ZP)({url:n.V+"/web/read/selectIsBuy",method:"get",params:e})}function y(e){return(0,o.ZP)({url:n.V+"/web/api/ocShoppingCart/selGoodsStatus?goodsId="+e,method:"get"})}function P(e){return(0,o.ZP)({url:n.V+"/web/api/ocShoppingCart/selSubjectStatus?id="+e,method:"get"})}function w(e){return(0,o.ZP)({url:n.V+"/web/read/isHavingPermissions",method:"POST",data:e})}function V(e){return(0,o.ZP)({url:n.V+"/web/otherRead/updateRecordAndSchedule",method:"POST",data:e})}function v(e){return(0,o.ZP)({url:n.V+"/web/otherRead/selectReadSchedule?goodsFileId="+e.goodsFileId+"&platformCode="+e.platformCode+"&stuNum="+e.stuNum,method:"GET"})}},7742:function(e,t,r){r.d(t,{Bi:function(){return y},Df:function(){return d},EN:function(){return p},IM:function(){return V},Nl:function(){return w},Nu:function(){return l},R4:function(){return A},R9:function(){return I},Rd:function(){return T},T8:function(){return f},Te:function(){return b},V$:function(){return g},Vx:function(){return h},XR:function(){return m},hE:function(){return a},iN:function(){return i},kr:function(){return s},m8:function(){return c},sS:function(){return v},v6:function(){return P},ve:function(){return u}});var o=r(84471),n=r(37182);function u(e){return(0,o.ZP)({url:n.V+"/web/subject/querySubjectList",method:"get",params:e})}function s(e){return(0,o.ZP)({url:n.V+"/web/subject/getSubjectDetails?subjectId="+e,method:"get"})}function i(e){return(0,o.ZP)({url:n.V+"/web/subject/getGoodsBySubjectId",method:"get",params:e})}function d(e){return(0,o.ZP)({url:n.V+"/web/subject/listEvaluate",method:"get",params:e})}function a(e){return(0,o.ZP)({url:n.V+"/web/subject/getRecomSubjectList?subjectId="+e,method:"get"})}function c(e){return(0,o.ZP)({url:n.V+"/web/subject/getRecomGoodsList?subjectId="+e,method:"get"})}function l(e){return(0,o.ZP)({url:n.V+"/web/api/note/addNote",method:"post",data:e})}function h(e){return(0,o.ZP)({url:n.V+"/web/api/note/updateNote",method:"post",data:e})}function f(e){return(0,o.ZP)({url:n.V+"/web/api/note/deleteNote",method:"post",params:{noteId:e}})}function g(e,t){return(0,o.ZP)({url:n.V+"/web/api/note/getNoteInfo",method:"get",params:{filesId:e,type:t}})}function m(e){return(0,o.ZP)({url:n.V+"/web/myResource/selectSubjectBase",method:"get",params:e})}function p(e){return(0,o.ZP)({url:n.V+"/web/myResource/selectSubjectGoodsList",method:"get",params:e})}function I(e){return(0,o.ZP)({url:n.V+"/web/myResource/selectBundleBase",method:"get",params:e})}function b(e){return(0,o.ZP)({url:n.V+"/web/myResource/selectBundleGoodsList",method:"get",params:e})}function y(e){return(0,o.ZP)({url:n.V+"/web/read/selectFileLinkAndReadingLocationV2",method:"post",data:e})}function P(e){return(0,o.ZP)({url:n.V+"/web/read/selectReadInfo",method:"get",params:e})}function w(e){return(0,o.ZP)({url:n.V+"/web/read/selectTimeParameter",method:"get",params:e})}function V(e){return(0,o.ZP)({url:n.V+"/web/read/updateOcDownloadReading",method:"post",data:e})}function v(e){return(0,o.ZP)({url:n.V+"/web/read/updateOcReadSchedule",method:"post",data:e})}function T(e){return(0,o.ZP)({url:n.V+"/getImagePathList",method:"get",params:e})}function A(e){return(0,o.ZP)({url:n.V+"/web/read/getSolicitUserFileLinkAndIsHavingPermissions?goodsId="+e.goodsId+"&goodsFileId="+e.filesId+"&fileType="+e.fileType,method:"get"})}},29861:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAAXZJREFUOE+1kztLA0EUhb/ZzW4SQcRCBENIJ4iFjdpoEcFGFBQRCwt7/QFp1NZCBHvJD7AwhY2K+Cy0EixEEATBJhAtTGV2s4+RTTQPszEmmCln7j33nHPPiNw+aygkpCRIK0dio7ArPlIY0CJIebD1X0Bme4GkDTiABkL5k3G1jKQF2uAGamSG/F0C+X4FoiGYjzSlh/Dca6HTyRxjnk0VViHUXqSdqcfQn5E+mkSNzJO/XcVJ74HbRXj2GeNkDKxHP3r+ZnvyUNSiUQ7oI0kC0WXc7DXG+QRCr8GqA+SC0GNI8wWlO04ofgp2HlQN82YB5+3gp0QfaRKUznFCk5cYF4sEhzcRwViJgrTS5A4HEFq+kpafRx2Ep+8Rah9oGtheDtxyk6JiPaxjPW0hAqXraiAvP/rQDmp0qbq5crYs+mcc9QPZ7xcfj7zhXvFvx3v3dlHOV5u/SMMc1xYUGJlAbTKaQJNgCyPFtgsrX6qbaC+VukhSnwXHoz6FWRezAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=2658.22562ed4.js.map