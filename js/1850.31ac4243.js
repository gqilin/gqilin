"use strict";(self["webpackChunkvue3_test"]=self["webpackChunkvue3_test"]||[]).push([[1850,6770],{66770:function(t,a,e){e.r(a),e.d(a,{default:function(){return l}});var s=function(){var t=this;t._self._c;return t._m(0)},i=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"no-data-box"},[a("span",{staticClass:"no_wrap"},[a("span",{staticClass:"no_data"},[a("img",{attrs:{src:e(89728)}}),a("p",{staticClass:"no_data_text"},[t._v("暂无数据")])])])])}],n={},r=n,o=e(1001),u=(0,o.Z)(r,s,i,!1,null,"7953425b",null),l=u.exports},21850:function(t,a,e){e.r(a),e.d(a,{default:function(){return p}});var s=function(){var t=this,a=t._self._c;return a("div",{staticClass:"author-library"},[a("div",{staticClass:"author-library-content"},[a("div",[a("div",{staticClass:"left-institution"},[a("div",{staticClass:"title theme-title"},[t._v("机构")]),a("div",{staticClass:"institution-list"},[a("div",{staticClass:"institution-item ellipsis-aRow",class:999==t.currentIndex?"active":"",on:{click:t.getAllDept}},[t._v(" 全部 ")]),t._l(t.deptList,(function(e,s){return a("div",{key:s,staticClass:"institution-item",class:t.currentIndex==s?"active":"",on:{click:function(a){return t.getDept(e.deptId,s)}}},[a("el-tooltip",{directives:[{name:"ak-tooltip-auto-show",rawName:"v-ak-tooltip-auto-show"}],attrs:{content:e.deptName,placement:"top"}},[a("span",{staticClass:"ellipsis-aRow",staticStyle:{width:"256px",display:"inline-block"}},[t._v(t._s(e.deptName))])])],1)}))],2)])]),a("div",{staticClass:"right-authors"},[a("div",{staticClass:"custom-search"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.queryParams.authorName,expression:"queryParams.authorName",modifiers:{trim:!0}}],staticClass:"custom-input",attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.queryParams.authorName},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleQuery.apply(null,arguments)},input:function(a){a.target.composing||t.$set(t.queryParams,"authorName",a.target.value.trim())},blur:function(a){return t.$forceUpdate()}}}),a("el-button",{staticClass:"custom-button",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleQuery}},[t._v("搜索")])],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"author-list"},t._l(t.authorList,(function(e,s){return a("div",{key:s,staticClass:"author-box"},[a("div",{staticClass:"author-avatar flex-center",on:{click:function(a){return t.toDetail(e.authorId)}}},[a("img",{attrs:{src:null==e.authorPortrait?t.defaultImg:e.authorPortrait,alt:""}})]),a("div",{staticClass:"right-author-content"},[a("div",{staticClass:"name",on:{click:function(a){return t.toDetail(e.authorId)}}},[a("span",{staticClass:"ellipsis-aRow"},[t._v(t._s(e.authorName))])]),a("div",{staticClass:"author-info"},[a("div",[a("span",[t._v("学术领域：")]),a("el-tooltip",{directives:[{name:"ak-tooltip-auto-show",rawName:"v-ak-tooltip-auto-show"}],attrs:{content:e.academicField,placement:"top"}},[a("span",{staticClass:"ellipsis-aRow"},[t._v(t._s(e.academicField?e.academicField:"-"))])])],1),a("div",[a("span",[t._v("商品数量：")]),a("span",{staticClass:"ellipsis-aRow"},[t._v(t._s(e.resourceCount)+"本")])]),a("div",[a("span",[t._v("所属机构：")]),a("el-tooltip",{directives:[{name:"ak-tooltip-auto-show",rawName:"v-ak-tooltip-auto-show"}],attrs:{content:e.cpName,placement:"top"}},[a("span",{staticClass:"ellipsis-aRow"},[t._v(t._s(e.cpName))])])],1)]),a("p",{staticClass:"ellipsis-twoRow"},[t._v(t._s(e.introduction))])])])})),0),0==t.total?a("noData"):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],staticClass:"pagination-box"},[a("el-pagination",{staticClass:"ou-pagination",attrs:{background:"","hide-on-single-page":"","current-page":t.queryParams.pageNum,"page-sizes":[10,20,30,40,50],"page-size":t.queryParams.pageSize,layout:"total, prev, pager, next, sizes, jumper, slot",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},[a("el-button",{staticClass:"ou-page-go",on:{click:function(a){return t.getList()}}},[t._v("GO")])],1)],1)],1)])])},i=[],n=(e(57658),e(66770)),r=e(47315),o=e(81094),u={data(){return{loading:!0,currentIndex:999,defaultImg:e(38862),total:0,deptList:[],authorList:[],queryParams:{pageNum:1,pageSize:10,deptId:null,authorName:null}}},components:{noData:n["default"]},watch:{$route(t,a){"/authorLibrary/index"==t.path&&this.getList()}},created(){this.getList()},methods:{getList(){(0,r.VW)().then((t=>{200==t.code&&(this.deptList=t.rows)})),(0,o.Pq)(this.queryParams).then((t=>{200==t.code&&(this.loading=!1,this.authorList=t.rows,this.total=t.total)}))},getAllDept(){this.currentIndex=999,this.queryParams={pageNum:1,pageSize:10,deptId:null,authorName:null},this.getList()},getDept(t,a){this.currentIndex=a,this.queryParams.deptId=t,this.queryParams.pageNum=1,this.getList()},toDetail(t){this.$router.push({path:"/authorLibrary/authorDetail",query:{authorId:t}})},handleQuery(){this.queryParams.pageNum=1,this.getList()},handleSizeChange(t){this.queryParams.pageSize=t,this.getList()},handleCurrentChange(t){this.queryParams.pageNum=t,this.getList()}}},l=u,c=e(1001),d=(0,c.Z)(l,s,i,!1,null,"4bbede2b",null),p=d.exports},81094:function(t,a,e){e.d(a,{Pq:function(){return n},d7:function(){return r},m5:function(){return o}});var s=e(84471),i=e(37182);function n(t){return(0,s.ZP)({url:i.V+"/web/oc/author/selectAuthorList",method:"get",params:t})}function r(t){return(0,s.ZP)({url:i.V+"/web/oc/author/getAuthorDetails?authorId="+t,method:"get"})}function o(t){return(0,s.ZP)({url:i.V+"/web/oc/author/selectAuthorGoods",method:"get",params:t})}},47315:function(t,a,e){e.d(a,{Kp:function(){return u},Pm:function(){return o},VW:function(){return n},pv:function(){return r}});var s=e(84471),i=e(37182);function n(t){return(0,s.ZP)({url:i.V+"/web/cp/inst/instList",method:"get",params:t})}function r(t){return(0,s.ZP)({url:i.V+"/web/cp/inst/instDetail?deptId="+t,method:"get"})}function o(t){return(0,s.ZP)({url:i.V+"/web/oc/author/listByInstId",method:"get",params:t})}function u(t){return(0,s.ZP)({url:i.V+"/web/goods/listGoodsByInstId",method:"get",params:t})}},89728:function(t,a,e){t.exports=e.p+"img/no_data.7d48eba9.png"}}]);
//# sourceMappingURL=1850.31ac4243.js.map