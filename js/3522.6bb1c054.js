"use strict";(self["webpackChunkvue3_test"]=self["webpackChunkvue3_test"]||[]).push([[3522,6770],{66770:function(e,t,s){s.r(t),s.d(t,{default:function(){return u}});var i=function(){var e=this;e._self._c;return e._m(0)},o=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"no-data-box"},[t("span",{staticClass:"no_wrap"},[t("span",{staticClass:"no_data"},[t("img",{attrs:{src:s(89728)}}),t("p",{staticClass:"no_data_text"},[e._v("暂无数据")])])])])}],a={},r=a,n=s(1001),d=(0,n.Z)(r,i,o,!1,null,"7953425b",null),u=d.exports},23522:function(e,t,s){s.r(t),s.d(t,{default:function(){return _}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"epub_box"},[t("div",{staticClass:"epub_box_c",staticStyle:{"margin-top":"15px"}},[t("div",{staticClass:"read_left_box"},[t("div",{staticClass:"read_left"},[t("div",{staticClass:"title theme-title"},[e._v("商品详情")]),t("div",{staticClass:"read_leftt1"},[t("img",{staticClass:"read_leftt1_img",attrs:{src:e.detail.resourceCover}}),t("div",{staticClass:"title"},[t("span",[e._v(e._s(e.detail.resourceName))])])]),t("div",{staticClass:"read_leftt2"},[t("li",[e._v("讲师："+e._s(e.detail.lecturer))]),t("li",[!e.showTime&&e.showStartTime||0==e.detail.isValidForever?t("div",[t("span",[e._v("有效期：")]),0!=e.detail.isValidForever?t("span",{staticClass:"ellipsis-aRow"},[e._v("截止到"+e._s(e.formatDate(e.detail.validEndDate)||"-"))]):e._e(),0==e.detail.isValidForever?t("span",{staticStyle:{"margin-left":"10rpx"}},[e._v("永久")]):e._e()]):e._e(),e.showTime&&e.showStartTime&&0!=e.detail.isValidForever?t("div",{staticStyle:{color:"red"}},[e._v(" 课程已到期 ")]):e._e(),e.showStartTime||0==e.detail.isValidForever?e._e():t("div",{staticStyle:{color:"red"}},[e._v(" 课程未开始 ")])])])]),t("div",{staticClass:"read_left2"},[t("div",[t("div",{staticClass:"radius"},[t("div",{staticClass:"time"},[e._v(" "+e._s(e.learningTime<60?e.learningTime:(e.learningTime/60).toFixed(1))+" "),t("span",{staticStyle:{"font-size":"14px"}},[e._v(e._s(e.learningTime<60?"分钟":"小时"))])]),t("div",{staticClass:"text"},[e._v("今日学习时长")])]),t("div",{staticClass:"num"},[t("span",{staticStyle:{"font-weight":"bold",color:"#2f7cfb","font-size":"25px"}},[e._v(e._s(e.GetQuestion.userQuestion||"0"))]),e._v("/"+e._s(e.GetQuestion.questionCount||"0")+" ")]),e._m(0)])])]),t("div",{staticClass:"video_box"},[t("div",{staticClass:"video_name_row"},[t("img",{staticClass:"img_box",attrs:{src:s(11397)}}),t("div",[e._v(e._s(e.sectionName))])]),e.startVideoUrlshow?t("div",{staticStyle:{width:"90%",margin:"20px auto"}},[t("player",{ref:"video_player",staticStyle:{width:"100%",height:"100%"},on:{reciveMessage:e.reciveMessage,videoEnd:e.videoEnd,videoPause:e.videoPause}})],1):e._e(),e.startVideoUrlshow?e._e():t("div",{staticStyle:{"text-align":"center","margin-top":"150px",height:"650px"}},[t("noData"),e.isShop?t("div",{staticStyle:{color:"#999"}},[e._v("课程已到期 / 课程未开始")]):e._e(),e.isShop?e._e():t("div",{staticStyle:{color:"#999"}},[e._v("未购买")])],1)]),t("div",{staticClass:"list_box"},[t("el-tabs",{staticClass:"tabs",on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"课程表",name:"first"}}),t("el-tab-pane",{attrs:{label:"试题",name:"second"}})],1),"first"==e.activeName?t("div",{staticClass:"tabs_box"},[e.courseListshow?e._e():t("el-collapse",{on:{change:e.handleChange},model:{value:e.course,callback:function(t){e.course=t},expression:"course"}},e._l(e.courseList,(function(i,o){return t("el-collapse-item",{key:o,attrs:{title:i.name,name:o+1}},e._l(i.sections,(function(a,r){return t("div",{key:r},[t("div",{staticClass:"row",staticStyle:{"margin-top":"5px"},on:{click:function(t){return e.startVideo(a,i.name,o)}}},[t("div",{staticClass:"collapse",class:a.content==e.vid?"color":""},[e._v(" "+e._s(a.name)+" ")]),t("div",{staticClass:"row"},[t("img",{attrs:{src:s(34401)}}),t("span",{staticClass:"collapse"},[e._v(e._s(e.xgetTime(a.duration)))])])])])})),0)})),1),e.courseListshow?t("noData"):e._e()],1):e._e(),"second"==e.activeName?t("div",{staticClass:"tabs_box"},[e.papershow?e._e():t("div",e._l(e.paperList,(function(s,i){return t("div",{key:i},[t("div",{staticClass:"shiti_row"},[t("div",{staticClass:"text"},[t("div",[e._v(e._s(s.paperName))]),t("div",[t("span",{staticStyle:{color:"#2e9adb"}},[e._v(e._s(s.useNum))]),e._v("/"+e._s(s.questionNum)+" ")])]),t("div",{staticClass:"but",on:{click:function(t){return e.anwser(s.id)}}},[e._v("去答题")])])])})),0),e.papershow?t("noData"):e._e()],1):e._e()],1)])])},o=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"label"},[t("span",[e._v("已做题目/总题数")])])}],a=(s(57658),s(85837)),r=s(66770),n=function(){var e=this;e._self._c;return e._m(0)},d=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"player-main"},[t("div",{staticClass:"player-box"},[t("div",{attrs:{id:"video_player"}})])])}],u={data(){return{player:"",url:"https://huixuexi.multimediapress.cn//images/1/2023/03/28/b8736c6e-127a-4e09-a438-6f7a71a6410e.mp4?auth_key=1681716196-0-0-e27e3860873302170aab02d2edf1792c"}},methods:{DmsPlayers(e,t,s,i,o){var a=this;this.player=new DmsPlayer({containerId:"video_player",url:s,cover:i,currentTime:o,autoplay:!1,loop:!1,showBar:!0,autoHideBar:!0,autoHideBarTime:5e3,playType:e,appId:t,vid:s,playCallBackTime:1e3,playCallBack:function(e){let t={name:"videoPlay",video:e};a.$emit("reciveMessage",t)},onEnd:function(e){let t={name:"videoEnd",video:e};a.$emit("videoEnd",t)},onPause:function(e){let t={name:"videoPause",video:e};a.$emit("videoPause",t)}})},destroy(){this.player.destroy()},CurrentTime(e){this.player.changeCurrentTime(e)}}},c=u,l=s(1001),h=(0,l.Z)(c,n,d,!1,null,"762b60d0",null),p=h.exports,m=s(66028),g=s(48598),v={components:{noData:r["default"],player:p},computed:{},data(){return{videourl:m.videourl,activeName:"first",payType:"goods",courseList:[],courseListshow:!1,paperList:[],course:[1],goodsId:this.$route.query.goodsId,detail:"",learningTime:0,timer:null,GetQuestion:"",frequency:1,currentTime:0,duration:0,startTime:0,chapterName:"",videoData:{},vid:"",showTime:!1,showStartTime:!0,isShop:!0,sectionName:"",startVideoUrlshow:!0,playState:!1,papershow:!1,courseCover:""}},watch:{$route(){}},created(){this.course[0]=localStorage.getItem("vidIndex")?Number(localStorage.getItem("vidIndex")):1,this.loading=this.$loading({lock:!0}),setTimeout((()=>{this.loading.close(),this.selectOclexueResourceBookByIds(),(0,g.jY)({goodsId:this.goodsId}).then((e=>{this.learningTime=e.data||0}))}),500)},beforedestroy(){this.updatePlayedbackSchedule()},destroyed(){clearInterval(this.timer),this.timer=null},mounted(){console.log(this.course),(0,g.Nl)().then((e=>{this.frequency=e.data||1}))},methods:{checkIsBuys(){this.payType="goods",(0,a.kx)({relevanceId:this.goodsId,type:this.payType}).then((e=>{"2"!==e.data?"1"===e.data?(this.isShop=!1,this.isPayGoods()):(this.isShop=!0,this.selectOcLexueResourceBookCourseByIds(),(0,g.fp)({goodsId:this.goodsId}).then((e=>{e.data?(this.GetQuestion=e.data,this.paperList=e.data.paperInfo||[],this.papershow=!1):this.papershow=!0}))):this.$message.error("数据异常")}))},isPayGoods(){this.startVideoUrlshow=!1,this.courseListshow=!0,this.papershow=!0;let e="该文件需要购买后才能阅读，是否确认购买";this.$alert(`${e}`,"购买",{confirmButtonText:"立即购买",callback:e=>{if("cancel"===e)return;let t=this.$store.getters.userId;t?(this.payType="goods",(0,a.kx)({relevanceId:this.goodsId,type:this.payType}).then((e=>{console.log("是否已购买响应",e),"2"!==e.data?"1"===e.data?this.$router.push({path:"/submitOrder/index",query:{id:this.$route.query.goodsId,from:"bookstore"}}):this.$message("该商品已购买无需重复购买"):this.$message.error("数据异常")}))):this.$router.push({path:"/login",query:{redirectPath:"/onlineReading"}})}})},reciveMessage(e){e&&(console.log(e),"videoPlay"==e.name&&(this.playState||(this.playState=!0,this.updatePlayedbackSchedule()),this.currentTime=e.video.currentTime,this.duration=e.video.duration,this.startTime++,this.startTime==60*this.frequency&&(this.startTime=0,(0,g.Uv)({goodsId:this.goodsId}).then((()=>{(0,g.jY)({goodsId:this.goodsId}).then((e=>{this.learningTime=e.data||0})),this.updatePlayedbackSchedule()})))))},videoEnd(e){e&&"videoEnd"==e.name&&(this.currentTime=e.video.currentTime,this.duration=e.video.duration,(0,g.Uv)({goodsId:this.goodsId}).then((()=>{(0,g.jY)({goodsId:this.goodsId}).then((e=>{this.learningTime=e.data||0})),this.updatePlayedbackSchedule()})))},videoPause(e){e&&"videoPause"==e.name&&(this.currentTime=e.video.currentTime,this.duration=e.video.duration,(0,g.Uv)({goodsId:this.goodsId}).then((()=>{(0,g.jY)({goodsId:this.goodsId}).then((e=>{this.learningTime=e.data||0})),this.updatePlayedbackSchedule()})))},updatePlayedbackSchedule(){(0,g.X_)({chapterId:this.vid,chapterName:this.chapterName,sectionName:this.sectionName,goodsId:this.goodsId,playbackDuration:this.currentTime,playbackLocation:this.currentTime>0&&this.duration>0?(100*this.currentTime/(100*this.duration)).toFixed(2):0})},selectOclexueResourceBookByIds(){let e={id:this.goodsId};(0,g.c$)(e).then((e=>{this.detail=e.data;let t=this.detail.validEndDate;if(0!=this.detail.isValidForever){new Date(t).getTime()>Date.now()?this.showTime=!1:this.showTime=!0;let e=this.detail.validStartDate;new Date(e).getTime()>Date.now()?this.showStartTime=!1:this.showStartTime=!0}this.checkIsBuys()}))},selectOcLexueResourceBookCourseByIds(){(0,g.dd)(this.goodsId).then((e=>{this.courseList=JSON.parse(e.data.course.chapters)||[],this.courseCover=e.data.course.cover||"",this.courseList.length>0?(this.getUserLastReads(),this.courseListshow=!1):this.courseListshow=!0}))},getUserLastReads(){(0,g.DA)(this.goodsId).then((e=>{let t=0;if(e.data.length>0){let s=e.data[0];s.sectionName&&(this.sectionName=s.sectionName),s.chapterName&&(this.chapterName=s.chapterName),s.chapterId&&(this.vid=s.chapterId),t=s.playbackDuration}if(0==e.data.length){if(!this.showStartTime||this.showTime)return void(this.startVideoUrlshow=!1);this.sectionName=this.courseList[0].sections[0].name,this.chapterName=this.courseList[0].name,this.vid=this.courseList[0].sections[0].content,this.videoData=this.courseList[0].sections[0],t=0}setTimeout((()=>{this.$refs.video_player.DmsPlayers(3,18,this.vid,this.courseCover,t)}),200)}))},startVideo(e,t,s){this.showStartTime?this.showTime?this.$message({message:"课程已过期"}):(this.playState=!1,this.vid=e.content,this.chapterName=t,this.sectionName=e.name,setTimeout((()=>{this.$refs.video_player.DmsPlayers(3,18,this.vid,this.courseCover,0)}),200)):this.$message({message:"课程未开始"})},handleClick(){},handleChange(){},anwser(e){if(!this.showStartTime)return void this.$message({message:"课程未开始"});if(this.showTime)return void this.$message({message:"课程已到期"});let t=this.$router.resolve({path:"/willingLearn/paper/testPaper",query:{id:e,goodsId:this.goodsId,teachProperty:this.detail.teachProperty}});window.open(t.href,"_blank")},xgetTime(e){let t=parseInt(e/60/60),s=parseInt(e/60),i=e%60,o=(t>9?t:"0"+t)+":"+(s>9?s:"0"+s)+":"+(i>9?i:"0"+i);return o},formatDate(e){var t=new Date(e),s=t.getFullYear(),i=t.getMonth()+1,o=t.getDate(),a=(t.getHours(),t.getMinutes(),t.getSeconds(),s+"-"+(i<10?"0"+i:i)+"-"+(o<10?"0"+o:o));return a}}},f=v,y=(0,l.Z)(f,i,o,!1,null,"1f342db4",null),_=y.exports},85837:function(e,t,s){s.d(t,{Cn:function(){return r},GC:function(){return I},KR:function(){return a},Mt:function(){return C},Qn:function(){return g},Uw:function(){return _},V2:function(){return b},Zt:function(){return w},_r:function(){return v},cC:function(){return f},hE:function(){return c},iG:function(){return l},kx:function(){return y},m8:function(){return u},nC:function(){return d},qH:function(){return p},sz:function(){return m},t5:function(){return n},yh:function(){return h}});var i=s(84471),o=s(37182);function a(e){return(0,i.ZP)({url:o.V+"/web/goods/getDictListByDictType?dictType="+e,method:"get"})}function r(e){return(0,i.ZP)({url:o.V+"/web/goods/getTreeSelectByType?catalogType="+e,method:"get"})}function n(e){return(0,i.ZP)({url:o.V+"/web/goods/selGoodsList",method:"post",data:e})}function d(e){return(0,i.ZP)({url:o.V+"/web/goods/selGoodsById?goodsId="+e,method:"get"})}function u(e){return(0,i.ZP)({url:o.V+"/web/goods/getRecomGoodsList?goodsId="+e,method:"get"})}function c(e){return(0,i.ZP)({url:o.V+"/web/goods/getRecomSubjectList?goodsId="+e,method:"get"})}function l(e){return(0,i.ZP)({url:o.V+"/web/goods/getEvaluateListByGoodsId",method:"get",params:e})}function h(e,t){return(0,i.ZP)({url:o.V+"/web/api/ocShoppingCart/addShoppingCart?goodsId="+e+"&userId="+t,method:"get"})}function p(e){return(0,i.ZP)({url:o.V+"/web/api/ocShoppingCart/isAddShoppingCart?goodsId="+e,method:"get"})}function m(e){return(0,i.ZP)({url:o.V+"/web/goods/addBookshelf",method:"get",params:e})}function g(e){return(0,i.ZP)({url:o.V+"/web/goods/isAddBookshelf",method:"get",params:e})}function v(e){return(0,i.ZP)({url:o.V+"/web/goods/delBookshelf",method:"get",params:e})}function f(e){return(0,i.ZP)({url:o.V+"/web/api/ocEvaluate/addReport",method:"post",data:e})}function y(e){return(0,i.ZP)({url:o.V+"/web/read/selectIsBuy",method:"get",params:e})}function _(e){return(0,i.ZP)({url:o.V+"/web/api/ocShoppingCart/selGoodsStatus?goodsId="+e,method:"get"})}function w(e){return(0,i.ZP)({url:o.V+"/web/api/ocShoppingCart/selSubjectStatus?id="+e,method:"get"})}function C(e){return(0,i.ZP)({url:o.V+"/web/read/isHavingPermissions",method:"POST",data:e})}function b(e){return(0,i.ZP)({url:o.V+"/web/otherRead/updateRecordAndSchedule",method:"POST",data:e})}function I(e){return(0,i.ZP)({url:o.V+"/web/otherRead/selectReadSchedule?goodsFileId="+e.goodsFileId+"&platformCode="+e.platformCode+"&stuNum="+e.stuNum,method:"GET"})}},48598:function(e,t,s){s.d(t,{Bc:function(){return h},Bo:function(){return a},DA:function(){return C},Nl:function(){return f},OL:function(){return p},Uv:function(){return _},Vn:function(){return g},X_:function(){return w},Zp:function(){return n},c$:function(){return l},dd:function(){return u},fp:function(){return y},i9:function(){return r},iu:function(){return c},jY:function(){return v},og:function(){return d},vR:function(){return m}});var i=s(84471),o=s(37182);function a(e){return(0,i.ZP)({url:o.V+"/web/goods/getTreeSelectByType",method:"get",params:e})}function r(e){return(0,i.ZP)({url:o.V+"/device/api/homePage/bannerList",method:"get",params:e})}const n=e=>(0,i.v_)(o.V+"/device/api/OcLexueHome/selectOclexueResource",e,{disableToken:!1});function d(e){return(0,i.ZP)({url:o.V+"/device/api/ocLexueResourceBook/selectOclexueResourceBook",method:"post",data:e})}function u(e){return(0,i.ZP)({url:o.V+"/device/api/ocLexueResourceBook/selectOcLexueResourceBookCourseById?goodsId="+e,method:"get"})}function c(e){return(0,i.ZP)({url:o.V+"/device/read/updateViewerNumber",method:"get",params:e})}function l(e){return(0,i.ZP)({url:o.V+"/device/api/ocLexueResourceBook/selectOclexueResourceBookById",method:"post",params:e})}function h(e){return(0,i.ZP)({url:o.V+"/device/lexueCode/boundLexueCode",method:"POST",data:e})}function p(e){return(0,i.ZP)({url:o.V+"/device/paper/selWrongQuestionList",token:!0,method:"post",data:e})}function m(e){return(0,i.ZP)({url:o.V+"/device/paper/wrongQuestionExercise",token:!0,method:"post",data:e})}function g(e){return(0,i.ZP)({url:o.V+"/device/paper/delWrongQuestion",token:!0,method:"post",data:e})}function v(e){return(0,i.ZP)({url:o.V+"/device/read/getLexueReadTime",token:!0,method:"get",params:e})}function f(){return(0,i.ZP)({url:o.V+"/device/read/selectTimeParameter",token:!0,method:"get"})}function y(e){return(0,i.ZP)({url:o.V+"/device/paper/getNumberQuestionIsUse",token:!0,method:"get",params:e})}function _(e){return(0,i.ZP)({url:o.V+"/device/read/updateOcDownloadReadingForLuxue",contentType:"application/x-www-form-urlencoded",token:!0,method:"post",params:e})}function w(e){return(0,i.ZP)({url:o.V+"/device/read/updateLexuePlayedbackSchedule",token:!0,method:"post",data:e})}function C(e){return(0,i.ZP)({url:o.V+"/device/read/getUserLastRead?goodsId="+e,token:!0,method:"get"})}},11397:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAATxJREFUOE+1071OAkEUhuF3ZgmLEl29Ejuvx2hlZaKJDVwCwd5YWxhtSNSCRC0gMRE7Ki2MjR2g4W8WljlmSYyoLLJrnHrOM9+ZOaPyB80cwj4olwRLsIFCH6pcsWkUJEI+z1VDlS+2DMhfIf9/IWsFAUYBpNNqjptT0xMtZRU7Gx7lSp/rW0PGBa1ngRHQyrJmb8sbJ2m8jji56PL4NCS7qCPSzQF9VNYfBpxedukZwf3RbgwoBAdDoVztU7kzpFKTrcaEQqzdtRSO3rB2sssYkAhUaobzmx6OA1olSPT8EnBc6tBoWRYy014vItGqp9nd9Gh3LKWrHvd1n2xGQ+QEREBh6vU1l2rNjItTzm9DGQGF1xgE8u1lZg34DGiOfzGxZQw1fSAdr/DrbhGC8PcXwG6DdpJggrVK1Nk79leuRjrJnbMAAAAASUVORK5CYII="},89728:function(e,t,s){e.exports=s.p+"img/no_data.7d48eba9.png"},34401:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAiVJREFUSEudlj9oE1Ecxz+/iAjqJPgPRUEUOpTcnSJClwqKiLjmgoOLRacqLVIoqGALKopo0aliV2ku7STFrRaXuuWq0C6CiA6F6tSh1JL85C65tInNvZf8tiOf7+/ze8m79yIYSovOJVQuAr3AQWAnsAr8RJhBmRM/DFu1kVYfaOD0gwwCJ0xDAJ+gMiL+l9lm9j+BTmePUs4UgB6Lxo2IMib5MBqqXg0CnfQcMhpNsa/t5pstZ8UvXUge6wINzh6CjW/Ans6b15MfxA+vRE9bBO5XoDul+SLwDrgJHDcOoTos+YWnsUAD5xbIeGpIeCi5cEQLzitEbhsFMSAHagI32nZ7DYLnkguHtOi+QeNVWJROiAZeL+icmZYX4pfuauC8Bekz8zGxIVpwXyIMmAMdCdZFAzd6Cx1rQdGbQPWGmY+J1UjwCzhiDiQrcN8DV838pmC5dsakZ5JdNJntJiOnqpukts3jH10ub9MgXsEP4Jh5Ip2G3dfFn19rZrXgPUB0tJXgI3DeLIiJ3yBroJkar8AO4HCLfLyCIeCZpaBdrCw6daaLSnmp3aQlv5IcFUsgXZYhe0wYrAqmsueoZD7bJ63IP+TC/VtOU+81aL9V1AqSHvFL840XTuC2s6Naa5R7kg8fV1+VptLAnQHiy6LDui9++CjJbnvpa+ANgz5pU/Ad1T7JL0TfQr1S/lWcPomW7yByDdiVIltBZAxdHxd/8W8z9w+PFrr4jsmv5wAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=3522.6bb1c054.js.map