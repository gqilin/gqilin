"use strict";(self["webpackChunkvue3_test"]=self["webpackChunkvue3_test"]||[]).push([[352],{40352:function(e,t,o){o.r(t),o.d(t,{default:function(){return p}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bookstore-detail"},[t("div",{staticClass:"book-introduction"},[t("div",{staticClass:"left-demo-card"},[t("div",{staticClass:"left-demo-body"},[t("div",{staticClass:"left-img-box flex-center"},[t("img",{attrs:{src:e.coverFiles.length>0?e.coverFiles[e.currImg].fullUrl:"",alt:""}})]),t("div",{staticClass:"left-small-img"},e._l(e.coverFiles,(function(o,r){return t("img",{key:r+Math.random(),class:r==e.currImg?"demo-card-box-img-checked":"",attrs:{src:o.fullUrl,alt:""},on:{click:function(t){return e.changeSrc(r)}}})})),0)])]),t("div",{staticClass:"right-info"},[t("div",{staticClass:"title"},[t("div",{staticClass:"book-label"},[e._v(" "+e._s(e.callDictionaries(e.goodsTypeList,e.goodsInfo.resourceType))+" ")]),t("span",[e._v(e._s(e.goodsInfo.goodsTitle))])]),e.goodsInfo.authorRecommendation?t("div",{staticClass:"book-intro"},[t("div",{staticClass:"defaultIntro",on:{mouseenter:e.enterShow,mouseleave:e.leaveShow}},[t("span",{staticClass:"twointro"},[e._v(e._s(e._f("ellipsis")(e.goodsInfo.authorRecommendation,120))+" "),e.goodsInfo.authorRecommendation.length>120?t("span",{staticClass:"font"},[e._v("更多")]):e._e()]),e.showMore?t("div",{staticClass:"allIntro"},[t("span",[e._v(e._s(e.goodsInfo.authorRecommendation))])]):e._e()])]):e._e(),t("div",{staticClass:"label"},e._l(e.keyword,(function(o,r){return t("span",{key:r},[e._v(e._s(o))])})),0),t("div",{staticClass:"book-intro-info"},["paper"==e.goodsInfo.goodsType?t("div",[t("span",[e._v("教学属性：")]),t("span",{staticClass:"ellipsis-aRow"},[e._v(e._s(null==e.goodsInfo.teachPropertyAllStr||""==e.goodsInfo.teachPropertyAllStr?"-":e.goodsInfo.teachPropertyAllStr))])]):e._e(),"paper"==e.goodsInfo.goodsType?t("div",[t("span",[e._v("学科：")]),t("span",{staticClass:"ellipsis-aRow"},[e._v(e._s(null==e.goodsInfo.subjectName||""==e.goodsInfo.subjectName?"-":e.goodsInfo.subjectName))])]):e._e(),"paper"==e.goodsInfo.goodsType?t("div",[t("span",[e._v("考试时长：")]),t("span",{staticClass:"ellipsis-aRow"},[e._v(e._s(null==e.goodsInfo.timeCount||""==e.goodsInfo.timeCount?"-":e.goodsInfo.timeCount)+"分钟")])]):e._e()]),t("div",{staticClass:"book-intro-info"},[t("div",[t("span",[e._v("题目数量：")]),t("span",{staticClass:"ellipsis-aRow"},[e._v(e._s(null==e.goodsInfo.questionCount||""==e.goodsInfo.questionCount?"-":e.goodsInfo.questionCount))])]),t("div",[t("span",[e._v("满分：")]),t("span",{staticClass:"ellipsis-aRow"},[e._v(e._s(null==e.goodsInfo.fullScore||""==e.goodsInfo.fullScore?"-":e.goodsInfo.fullScore)+"分")])]),t("div",[t("span",[e._v("及格分：")]),t("span",{staticClass:"ellipsis-aRow"},[e._v(e._s(null==e.goodsInfo.passingScore||""==e.goodsInfo.passingScore?"-":e.goodsInfo.passingScore)+"分")])])]),t("div",{staticStyle:{width:"899px",height:"2px",background:"#f2f2f2"}}),t("div",{staticClass:"buttons"},[t("el-button",{attrs:{type:"primary"},on:{click:e.answer}},[e._v("在线考试")])],1)])]),t("div",{staticClass:"table_list"},[t("el-table",{staticStyle:{width:"100%",background:"#fffefd"},attrs:{data:e.tableData,"header-cell-style":{"text-align":"center",height:"80px",background:"#fffefd"},"cell-style":{"text-align":"center",height:"80px",background:"#fffefd"},height:"450px"}},[t("el-table-column",{attrs:{prop:"testDate",label:"考试时间",width:"450"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("span",{staticClass:"underline",on:{click:function(t){return e.analyse(o.row)}}},[e._v(e._s(e.parseTime(o.row.testDate)))])]}}])}),t("el-table-column",{attrs:{prop:"useTime",label:"考试次数：","render-header":e.useTimeHeader,width:"450"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("span",{on:{click:function(t){return e.analyse(o.row)}}},[e._v(e._s(e.getTime(o.row.useTime)))])]}}])}),t("el-table-column",{attrs:{prop:"answerScore",label:"平均得分（不含主观题）：","render-header":e.answerScoreHeader,width:"500"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("span",{on:{click:function(t){return e.analyse(o.row)}}},[e._v(e._s(o.row.answerScore)+"分")])]}}])})],1),e.total>0?t("div",{staticClass:"pagination-box"},[t("el-pagination",{staticClass:"ou-pagination",attrs:{background:"","current-page":e.queryParams.pageNum,"page-sizes":[10,20,30,40,50],"page-size":e.queryParams.pageSize,layout:"total, prev, pager, next, sizes, jumper, slot",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[t("el-button",{staticClass:"ou-page-go"},[e._v("GO")])],1)],1):e._e()],1)])},s=[],n=(o(57658),o(85837)),a=o(65142),u=o(63683),i={data(){return{subjectId:null,difen:"",showMore:!1,sourceList:"",keyword:[],goodsId:null,goodsType:null,goodsInfo:{},currImg:0,coverFiles:[],authorList:[],queryParams:{pageNum:1,pageSize:10,answerPlatform:"",paperId:"",userId:"",token:"",params1:""},total:0,goodsTypeList:[],tableData:[]}},computed:{},components:{},created(){this.$store.commit("subjectId_book",this.$route.query.goodsId),this.goodsId=this.$route.query.goodsId,this.goodsType=this.$route.query.goodsType,this.subjectId=this.$route.query.subjectId,this.queryParams.userId=this.$store.state.user.userId,this.getList(),this.getoc_resource_file()},watch:{$route(){this.$route.query.goodsId&&(this.$store.commit("subjectId_book",this.$route.query.goodsId),this.goodsId=this.$route.query.goodsId,this.goodsType=this.$route.query.goodsType,this.getList())}},methods:{enterShow(){this.goodsInfo.authorRecommendation.length>135&&(this.showMore=!0)},leaveShow(){this.showMore=!1},useTimeHeader(e,{column:t}){return e("div",[e("span",t.label),e("span",this.total)])},answerScoreHeader(e,{column:t}){return e("div",[e("span",t.label),e("span",this.difen+"分")])},getTime(e){let t=parseInt(e/60),o=e%60,r=(t>9?t:"0"+t)+"分"+(o>9?o:"0"+o)+"秒";return r},getList(){(0,n.nC)(this.goodsId).then((e=>{if(200==e.code){if(this.goodsInfo=e.data.goods,this.sourceList=e.data.sourceList[0],this.goodsInfo.keyword&&(this.keyword=this.goodsInfo.keyword.split(",")),this.coverFiles=e.data.coverFiles,0==this.coverFiles.length){let e={fullUrl:o(68671)};this.coverFiles.push(e)}this.authorList=e.data.authorList,this.getAnswerPaperRecord()}}))},getAnswerPaperRecord(){(0,u.AQ)().then((e=>{this.queryParams.token=e.data,this.queryParams.paperId=this.goodsInfo.paperId,this.queryParams.params1=this.$route.query.goodsId,(0,a.Si)(this.queryParams).then((e=>{200==e.code&&(this.tableData=e.rows,this.total=e.total)})),(0,a.wW)(this.queryParams).then((e=>{200==e.code&&(this.difen=e.msg)}))}))},changeSrc(e){this.currImg=e},analyse(e){this.$router.push({path:"/bookstore/analyse",query:{goodsId:this.$route.query.goodsId,testPaperId:e.id,paperId:this.goodsInfo.paperId,fromType:"/user/myResources"}})},handleSizeChange(e){this.queryParams.pageSize=e,this.getAnswerPaperRecord()},handleCurrentChange(e){this.queryParams.pageNum=e,this.getAnswerPaperRecord()},getoc_resource_file(){(0,n.KR)("oc_resource_file").then((e=>{this.goodsTypeList=e.data}))},answer(){(0,n.Mt)({goodsFileId:this.sourceList.goodsId,fileType:this.sourceList.fileType,goodsId:this.$route.query.goodsId,relevanceId:this.$route.query.relevanceId,resource:this.$route.query.resource,resourceType:this.$route.query.resourceType,teachInstId:this.$route.query.teachInstId}).then((e=>{e.data.hasPermission?this.$router.push({path:"/bookstore/examination",query:{testPaperId:this.goodsInfo.paperId,userId:this.$store.state.user.userId,userName:this.$store.state.user.name,goodsId:this.$route.query.goodsId,fromType:"/user/myResources"}}):this.$alert("该文件需要购买后才能阅读，是否确认购买","购买",{confirmButtonText:"立即购买",callback:e=>{if("cancel"===e)return;let t=this.$store.getters.userId;t?(this.payType=this.$route.query.payType?this.$route.query.payType:"goods",(0,n.kx)({relevanceId:this.$route.query.goodsId,type:this.payType}).then((e=>{console.log("是否已购买响应",e),"2"!==e.data?"1"===e.data?this.$router.push({path:"/submitOrder/index",query:{id:this.$route.query.goodsId,from:"bookstore"}}):this.$message("该商品已购买无需重复购买"):this.$message.error("数据异常")}))):(this.$store.commit("SET_REDIRECTPARAMS",{goodsId:this.$route.query.goodsId,relevanceId:this.$route.query.relevanceId,resource:this.$route.query.resource,resourceType:this.$route.query.resourceType}),this.$router.push({path:"/login",query:{redirectPath:"/bookstore/answer"}}))}})}))}}},d=i,c=o(1001),l=(0,c.Z)(d,r,s,!1,null,"713fe749",null),p=l.exports},65142:function(e,t,o){o.d(t,{Qe:function(){return P},gQ:function(){return v},mN:function(){return _},kS:function(){return w},wW:function(){return b},Si:function(){return m},Jk:function(){return I},kJ:function(){return y},jB:function(){return S}});o(21703);var r=o(6154),s=o(64720),n=o(56056),a=(o(51836),o(72382)),u=o(37499),i=o(66028);o(52876),o(31955);const d={401:"认证失败，无法访问系统资源",403:"当前操作没有权限",404:"访问资源不存在",default:"系统未知错误，请反馈给管理员"};let c=null,l=!1,p=null;r.Z.defaults.headers["Content-Type"]="application/json;charset=utf-8";const g=r.Z.create({baseURL:i.testApiURL,timeout:1e5});g.interceptors.request.use((e=>{(e.headers||{}).isToken;const t=!1===(e.headers||{}).repeatSubmit;let o=JSON.stringify(e.data.token);if(e.headers["platform"]="out",e.headers["sysId"]=i.sysId,e.headers["token"]=o,"get"===e.method&&e.params){let t=e.url+"?"+(0,a.tansParams)(e.params);t=t.slice(0,-1),e.params={},e.url=t}if(!t&&("post"===e.method||"put"===e.method)){const t={url:e.url,data:"object"===typeof e.data?JSON.stringify(e.data):e.data,time:(new Date).getTime()},o=u["default"].session.getJSON("sessionObj");if(void 0===o||null===o||""===o)u["default"].session.setJSON("sessionObj",t);else{const e=o.url,r=o.data,s=o.time,n=2e3;if(h.includes(o.url),r===t.data&&t.time-s<n&&e===t.url){const t="数据正在处理，请勿重复提交";return console.warn(`[${e}]: `+t),Promise.reject(new Error(t))}u["default"].session.setJSON("sessionObj",t)}}return e}),(e=>{console.log(e),Promise.reject(e)})),g.interceptors.response.use((e=>{clearTimeout(p),l&&(l=!1,c.close());const t=e.config||{},o=e.data.code||200,r=d[o]||e.data.msg||d["default"];if("blob"===e.request.responseType||"arraybuffer"===e.request.responseType)return e.data;if(401===o)return n.Z.dispatch("FedLogOut"),Promise.reject("无效的会话，或者会话已过期，请重新登录。");if(500!==o||h.includes(e.config.url.split("?")[0]))return 200!==o?h.includes(e.config.url.split("?")[0])?e.data:((0,s.Message)({message:r,type:"error"}),Promise.reject(e.data)):e.data;{console.log(123,h.includes(e.config.url)),console.log(1234,e.config.url.split("?")[0]);let o=!0;return(t.isSilence||t.isFocusPassCode)&&(o=!1),o&&(0,s.Message)({message:r,type:"error"}),t.isFocusPassCode?e.data:Promise.reject(new Error(r))}}),(e=>{clearTimeout(p),l&&(l=!1,c.close()),console.log("err: "+e);let{message:t}=e;return"Network Error"==t?t="后端接口连接异常":t.includes("timeout")?t="系统接口请求超时":t.includes("Request failed with status code")&&(t="系统接口"+t.substr(t.length-3)+"异常"),"数据正在处理，请勿重复提交"!==t&&(0,s.Message)({message:t,type:"error",duration:5e3}),Promise.reject(e)}),(()=>{}));const h=["/ouchn-customapi/web/read/updateOcDownloadReading","/ouchn-customapi/getImagePathList?filePath=","/ouchn-customapi/web/tbOrderAuthCard/selectCardBuCardNo","/otpApi/business/testPaper/getTPAnswerRecordByUserId"];var f=g;function m(e){return f({url:"/otpApi/business/record/getAnswerPaperRecord?pageNum="+e.pageNum+"&pageSize="+e.pageSize,method:"POST",data:e})}function I(e){return f({url:"/otpApi/business/record/getStatisKpInfo/"+e.aprId,method:"get",data:e})}function y(e){return f({url:"/otpApi/business/subject/queryTreeNoAllSubjectSelect",method:"get",data:e})}function b(e){return f({url:"/otpApi/business/record/getAnswerPaperGpa?pageNum="+e.pageNum+"&pageSize="+e.pageSize,method:"POST",data:e})}function w(e){return f({url:"/otpApi/business/testPaper/getTPAnswerRecordByUserId?userId="+e.userId+"&paperId="+e.paperId,method:"post",data:e})}function P(e){return f({url:"/otpApi/business/record/saveAnswerPaperRecord",method:"post",data:e})}function v(e){return f({url:"/otpApi/business/aqrecord/addAnsQuesRecordResultAnswer",method:"post",data:e})}function S(e){return f({url:"/otpApi/business/record/submitAnswerPaperRecord",method:"post",data:e})}function _(e){return f({url:"/otpApi/business/testPaper/getTestPaperExamInfoById?paperId="+e.paperId+"&ansRecordId="+e.ansRecordId,method:"get",data:e})}},85837:function(e,t,o){o.d(t,{Cn:function(){return a},GC:function(){return S},KR:function(){return n},Mt:function(){return P},Qn:function(){return f},Uw:function(){return b},V2:function(){return v},Zt:function(){return w},_r:function(){return m},cC:function(){return I},hE:function(){return c},iG:function(){return l},kx:function(){return y},m8:function(){return d},nC:function(){return i},qH:function(){return g},sz:function(){return h},t5:function(){return u},yh:function(){return p}});var r=o(84471),s=o(37182);function n(e){return(0,r.ZP)({url:s.V+"/web/goods/getDictListByDictType?dictType="+e,method:"get"})}function a(e){return(0,r.ZP)({url:s.V+"/web/goods/getTreeSelectByType?catalogType="+e,method:"get"})}function u(e){return(0,r.ZP)({url:s.V+"/web/goods/selGoodsList",method:"post",data:e})}function i(e){return(0,r.ZP)({url:s.V+"/web/goods/selGoodsById?goodsId="+e,method:"get"})}function d(e){return(0,r.ZP)({url:s.V+"/web/goods/getRecomGoodsList?goodsId="+e,method:"get"})}function c(e){return(0,r.ZP)({url:s.V+"/web/goods/getRecomSubjectList?goodsId="+e,method:"get"})}function l(e){return(0,r.ZP)({url:s.V+"/web/goods/getEvaluateListByGoodsId",method:"get",params:e})}function p(e,t){return(0,r.ZP)({url:s.V+"/web/api/ocShoppingCart/addShoppingCart?goodsId="+e+"&userId="+t,method:"get"})}function g(e){return(0,r.ZP)({url:s.V+"/web/api/ocShoppingCart/isAddShoppingCart?goodsId="+e,method:"get"})}function h(e){return(0,r.ZP)({url:s.V+"/web/goods/addBookshelf",method:"get",params:e})}function f(e){return(0,r.ZP)({url:s.V+"/web/goods/isAddBookshelf",method:"get",params:e})}function m(e){return(0,r.ZP)({url:s.V+"/web/goods/delBookshelf",method:"get",params:e})}function I(e){return(0,r.ZP)({url:s.V+"/web/api/ocEvaluate/addReport",method:"post",data:e})}function y(e){return(0,r.ZP)({url:s.V+"/web/read/selectIsBuy",method:"get",params:e})}function b(e){return(0,r.ZP)({url:s.V+"/web/api/ocShoppingCart/selGoodsStatus?goodsId="+e,method:"get"})}function w(e){return(0,r.ZP)({url:s.V+"/web/api/ocShoppingCart/selSubjectStatus?id="+e,method:"get"})}function P(e){return(0,r.ZP)({url:s.V+"/web/read/isHavingPermissions",method:"POST",data:e})}function v(e){return(0,r.ZP)({url:s.V+"/web/otherRead/updateRecordAndSchedule",method:"POST",data:e})}function S(e){return(0,r.ZP)({url:s.V+"/web/otherRead/selectReadSchedule?goodsFileId="+e.goodsFileId+"&platformCode="+e.platformCode+"&stuNum="+e.stuNum,method:"GET"})}},63683:function(e,t,o){o.d(t,{$A:function(){return b},AQ:function(){return w},BF:function(){return P},E_:function(){return i},Ex:function(){return n},Hp:function(){return m},NB:function(){return h},Pw:function(){return _},Wn:function(){return I},bQ:function(){return l},hH:function(){return u},jv:function(){return p},l3:function(){return a},nC:function(){return d},nG:function(){return c},nq:function(){return y},s$:function(){return g},t5:function(){return S},wh:function(){return v},xk:function(){return f}});var r=o(84471),s=o(37182);function n(e){return(0,r.ZP)({url:s.V+"/web/api/homePage/bannerList",method:"get",params:e})}function a(e){return(0,r.ZP)({url:s.V+"/web/api/homePage/goodsList",method:"get",params:e})}function u(e){return(0,r.ZP)({url:s.V+"/web/api/homePage/goodBookList",method:"get",params:e})}function i(e){return(0,r.ZP)({url:s.V+"/web/goods/getGuessFavouriteNoLogin",method:"get",params:e})}function d(e){return(0,r.ZP)({url:s.V+"/web/goods/getGuessFavouriteForLogin",method:"get",params:e})}function c(e){return(0,r.ZP)({url:s.V+"/web/api/homePage/selHotBookList",method:"get",params:e})}function l(e){return(0,r.ZP)({url:s.V+"/web/api/homePage/selSubjectList",method:"get",params:e})}function p(e){return(0,r.ZP)({url:s.V+"/web/api/homePage/selAuthorList",method:"get",params:e})}function g(e){return(0,r.ZP)({url:s.V+"/web/api/homePage/selDeptList",method:"get",params:e})}function h(e){return(0,r.ZP)({url:s.V+"/web/api/homePage/selectNewsById",method:"get",params:e})}function f(e){return(0,r.ZP)({url:s.V+"/web/serch/selectBooks",method:"get",params:e})}function m(e){return(0,r.ZP)({url:s.V+"/web/serch/selectSubjects",method:"get",params:e})}function I(e){return(0,r.ZP)({url:s.V+"/web/serch/selectAuthors",method:"get",params:e})}function y(e){return(0,r.ZP)({url:s.V+"/web/serch/selectInst",method:"get",params:e})}function b(e){return(0,r.ZP)({url:s.V+"/web/api/homePage/selectNewsByType?type="+e,method:"get"})}function w(){return(0,r.ZP)({url:s.V+"/web/paper/getToken",method:"get"})}function P(){return(0,r.ZP)({url:s.V+"/web/looseleaf/getToken",method:"get"})}function v(){return(0,r.ZP)({url:s.V+"/web/config/getConfigKey",method:"get"})}function S(e){return(0,r.ZP)({url:s.V+"/Integral/insertIntegralsg",method:"get",params:e})}function _(e){return(0,r.ZP)({url:s.V+"/Integral/insertIntegrals",method:"get",params:e})}},68671:function(e,t,o){e.exports=o.p+"img/default_img.09c6c54f.jpg"}}]);
//# sourceMappingURL=352.40cb508d.js.map